<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CivilCode ‚Äì Indian Civil Engineering Suite</title>
  
  <!-- Google Fonts (Inter) ‚Äì already good -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Font Awesome 6.6.0 ‚Äì Latest stable free version with integrity -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" 
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" 
        crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <!-- Optional: Fallback if CDN fails (you can remove later) -->
  <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.6.0/css/all.css"> -->
  
  <!-- Your existing styles -->
  <style>
  :root{
    --primary: #0d9488;      /* Main brand color - Soft Teal */
    --accent: #f43f5e;        /* Buttons, highlights - Warm Coral */
    --dark: #1e293b;         /* Header, sidebar, main text */
    --light: #f8fafc;         /* Background */
    --success: #10b981;      /* Results, safe */
    --card-bg: #ffffff;
    --text: #334155;
    --text-light: #64748b;
    --border: #e2e8f0;
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  body{
    font-family:'Inter',sans-serif;
    background:var(--light);
    color:var(--text);
    line-height:1.6;
    overflow-x:hidden;
  }

  /* Login Screen - Updated gradient */
  #login-screen{
    position:fixed;inset:0;
    background:linear-gradient(135deg, #0d9488, #0891b2);
    display:flex;align-items:center;justify-content:center;z-index:999;
  }
  #login-box{
    background:rgba(255,255,255,0.25);
    backdrop-filter:blur(15px);
    padding:50px 40px;
    border-radius:20px;
    text-align:center;
    max-width:420px;
    width:90%;
    box-shadow:0 20px 50px rgba(0,0,0,0.3);
  }
  #login-box h1{color:white;font-size:40px;margin-bottom:10px;}

  input{
    width:100%;padding:16px;margin:15px 0;
    border:none;border-radius:12px;font-size:17px;
    background:rgba(255,255,255,0.9);
  }
  button{
    padding:16px 32px;
    border:none;
    border-radius:12px;
    font-weight:600;
    cursor:pointer;
    font-size:18px;
    transition:0.3s;
  }
  .btn-red{background:var(--accent);color:white;}
  .btn-blue{background:var(--primary);color:white;}

  /* Header & Sidebar */
  header{
    background:var(--dark);
    color:white;
    padding:15px 20px;
    text-align:center;
    position:fixed;
    top:0;left:0;right:0;
    z-index:99;
    box-shadow:0 4px 15px rgba(0,0,0,0.15);
  }
  #menu-toggle{
    display:none;
    font-size:28px;
    cursor:pointer;
    position:absolute;
    left:18px;
    top:50%;
    transform:translateY(-50%);
    background:rgba(255,255,255,0.15);
    width:50px;height:50px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    transition:0.3s;
  }
  #menu-toggle:hover{background:rgba(255,255,255,0.3);}
  header h1{font-size:24px;margin:0;}
  header p{font-size:14px;margin-top:4px;opacity:0.9;}

  nav#sidebar{
    background:var(--dark);
    width:280px;
    position:fixed;
    height:100%;
    overflow-y:auto;
    padding-top:80px;
    box-shadow:8px 0 25px rgba(0,0,0,0.15);
    z-index:98;
    transition:left 0.35s ease;
    left:0;
  }
  nav#sidebar.closed{left:-280px;}

  .menu > li > span{
    display:flex;
    align-items:center;
    padding:16px 24px;
    color:#cbd5e1;
    font-weight:500;
    font-size:15px;
    cursor:pointer;
    transition:0.25s;
    gap:14px;
  }
  .menu > li > span i{width:24px;text-align:center;}
  .menu > li > span:hover{
    background:rgba(255,255,255,0.15);
    color:white;
  }
  .menu > li > span.active{
    background:var(--primary);
    color:white;
  }

  .submenu{
    padding-left:58px;
    display:none;
    background:rgba(0,0,0,0.15);
  }
  .submenu.active{display:block;}
  .submenu span{
    display:block;
    padding:11px 0;
    color:#94a3b8;
    font-size:14px;
    cursor:pointer;
  }
  .submenu span:hover{color:white;}

  main{
    margin-left:280px;
    margin-top:80px;
    padding:30px;
    min-height:calc(100vh - 80px);
    transition:margin-left 0.35s;
  }

  /* Cards */
  .card{
    background:var(--card-bg);
    border-radius:16px;
    padding:32px;
    margin-bottom:28px;
    box-shadow:0 10px 30px rgba(0,0,0,0.06);
  }
  .card h2{
    color:var(--primary);
    font-size:26px;
    margin-bottom:18px;
    border-bottom:3px solid var(--primary);
    padding-bottom:10px;
  }

  .mode-grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:22px;
    margin:30px 0;
  }
  .mode-card{
    background:var(--card-bg);
    border-radius:16px;
    padding:28px;
    text-align:center;
    cursor:pointer;
    transition:all 0.4s;
    box-shadow:0 8px 25px rgba(0,0,0,0.08);
    border:3px solid transparent;
  }
  .mode-card:hover{
    transform:translateY(-10px);
    border-color:var(--primary);
    box-shadow:0 15px 40px rgba(0,0,0,0.12);
  }
  .mode-card i{
    font-size:48px;
    color:var(--primary);
    margin-bottom:14px;
  }
  .mode-card h3{
    font-size:19px;
    color:var(--dark);
  }

  label{
    display:block;
    margin:18px 0 8px;
    font-weight:600;
    color:#444;
  }
  input,select{
    width:100%;
    padding:14px;
    border:2px solid var(--border);
    border-radius:12px;
    font-size:16px;
    transition:0.3s;
  }
  input:focus,select:focus{
    border-color:var(--primary);
    outline:none;
    box-shadow:0 0 0 4px rgba(13,148,136,0.15);
  }

  button.btn-calc{
    background:var(--accent);
    color:white;
    padding:16px 30px;
    margin-top:20px;
    width:100%;
    font-size:18px;
    cursor:pointer;
    border:none;
    border-radius:12px;
    transition:0.3s;
  }
  button.btn-calc:hover{
    background:#e11d48;
    transform:translateY(-2px);
  }

  .result{
    margin-top:28px;
    padding:24px;
    background:#d4edda;
    border-left:6px solid var(--success);
    border-radius:8px;
    font-size:18px;
  }
  .fail{
    background:#fce7e9;
    border-left-color:var(--accent);
  }

  /* IS Codes Grid */
  .code-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
    gap: 22px;
    margin-top: 25px;
    padding: 10px;
  }
  .code-card {
    background: var(--card-bg);
    border-radius: 14px;
    padding: 22px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }
  .code-card:hover {
    transform: translateY(-8px);
    border-color: var(--primary);
    box-shadow: 0 15px 40px rgba(0,0,0,0.12);
  }
  .code-card h3 {
    color: var(--primary);
    font-size: 17px;
    margin-bottom: 8px;
  }
  .code-card a {
    display: inline-block;
    background: var(--accent);
    color: white;
    padding: 10px 20px;
    border-radius: 10px;
    text-decoration: none;
    font-weight: 600;
    font-size: 15px;
    margin-top: 10px;
    transition: 0.3s;
  }
  .code-card a:hover {
    background: #e11d48;
    transform: scale(1.05);
  }

  /* Mobile */
  @media (max-width:992px){
    #menu-toggle{display:flex !important;}
    nav#sidebar{left:-280px;}
    nav#sidebar.active{left:0;}
    main{margin-left:0;}
    header h1{font-size:22px;}
  }

  .code-category {margin-bottom:30px;}
  .category-title {
    background:var(--dark);color:white;padding:16px 24px;border-radius:12px;
    cursor:pointer;font-size:18px;font-weight:600;transition:0.3s;
  }
  .category-title:hover {background:#0f172a;}
  .code-category .category-grid {display:none;padding:20px 0;}
  .code-category.open .category-grid {display:grid;}

  /* Submenu arrows */
  .menu > li > span.has-submenu {
    justify-content: space-between;
  }
  .submenu-arrow {
    transition: transform 0.3s ease;
    font-size: 14px;
    opacity: 0.7;
  }
  .menu > li > span.active .submenu-arrow {
    transform: rotate(180deg);
  }
  .submenu span {
    padding: 12px 24px 12px 68px !important;
    font-size: 14.5px;
    color: #cbd5e1;
  }
  .submenu span:hover {
    background: rgba(255,255,255,0.08);
    color: white;
  }
</style>
</head>
<body>
  


  <nav id="sidebar" class="closed">
  <ul class="menu">
    <!-- 1. Home -->
    <li>
      <span onclick="showHome()" class="active">
        <i class="fas fa-home"></i> Home
      </span>
    </li>

   <!-- 2. RCC Designers -->
<li>
  <span onclick="toggleSub('design-submenu')" class="has-submenu">
    <i class="fas fa-building-columns"></i> RCC Design
    <i class="fas fa-chevron-down submenu-arrow"></i>
  </span>
  <ul id="design-submenu" class="submenu">
    <li><span onclick="showOneWay()"><i class="fas fa-ruler-horizontal"></i> One-Way Slab</span></li>
    <li><span onclick="showTwoWay()"><i class="fas fa-th"></i> Two-Way Slab</span></li>
    <li><span onclick="showBeam()"><i class="fas fa-vector-square"></i> Beam Design</span></li>
    <li><span onclick="showColumn()"><i class="fas fa-columns"></i> Column Design</span></li>
    <li><span onclick="showWaterTank()"><i class="fas fa-cube"></i> Water Tank</span></li>
    <li><span onclick="showStaircase()"><i class="fas fa-stairs"></i> Dog-legged Staircase</span></li>
    <li><span onclick="showCrack()"><i class="fas fa-hard-hat"></i> Crack Width</span></li>
    <li><span onclick="showDevLength()"><i class="fas fa-link"></i> Development Length</span></li>
    <li><span onclick="showMixDesign()"><i class="fas fa-flask"></i> Concrete Mix Design</span></li>
  </ul>
</li>

    <!-- 3. Steel Designers -->
    <li>
      <span onclick="toggleSub('steel-submenu')" class="has-submenu">
        <i class="fas fa-grip-lines-vertical"></i> Steel Design
        <i class="fas fa-chevron-down submenu-arrow"></i>
      </span>
      <ul id="steel-submenu" class="submenu">
        <li><span onclick="showSteelBeam()"><i class="fas fa-vector-square"></i> Beam Design</span></li>
        <li><span onclick="showSteelColumn()"><i class="fas fa-columns"></i> Column Design</span></li>
        <li><span onclick="showSteelTension()"><i class="fas fa-link"></i> Tension Member</span></li>
        <li><span onclick="showSteelConnection()"><i class="fas fa-bolt"></i> Bolted Connection</span></li>
        <li><span onclick="showSteelBasePlate()"><i class="fas fa-layer-group"></i> Base Plate</span></li>
      </ul>
    </li>

    <!-- 4. Practical Tools (ONE TIME ONLY ‚Äì WITH ALL SOIL TOOLS) -->
    <li>
      <span onclick="toggleSub('tools-submenu')" class="has-submenu">
        <i class="fas fa-tools"></i> Practical Tools
        <i class="fas fa-chevron-down submenu-arrow"></i>
      </span>
      <ul id="tools-submenu" class="submenu">
        <li><span onclick="showUnitConverter()"><i class="fas fa-exchange-alt"></i> Unit Converter</span></li>
        <li><span onclick="showThumbRules()"><i class="fas fa-ruler-combined"></i> Thumb Rules</span></li>
        <li><span onclick="showBBS()"><i class="fas fa-cut"></i> Bar Bending Schedule</span></li>
        <li><span onclick="showLoadCalc()"><i class="fas fa-weight-hanging"></i> Load Estimator</span></li>
        <li><span onclick="showSBC()"><i class="fas fa-mountain"></i> Soil SBC Guide</span></li>
        <li><span onclick="showBearingCapacity()"><i class="fas fa-compress"></i> Bearing Capacity</span></li>
        <li><span onclick="showSettlement()"><i class="fas fa-arrow-down"></i> Settlement Estimate</span></li>
        <li><span onclick="showEarthPressure()"><i class="fas fa-balance-scale"></i> Earth Pressure</span></li>
        <li><span onclick="showPileCapacity()"><i class="fas fa-gem"></i> Pile Capacity</span></li>
        <li><span onclick="showSoilWeight()"><i class="fas fa-feather"></i> Soil Unit Weight</span></li>
      </ul>
    </li>

    <!-- 5. Codal Provisions -->
    <li>
      <span onclick="showCodalProvisions()">
        <i class="fas fa-book-open"></i> Codal Provisions
      </span>
    </li>

    <!-- 6. Disclaimer -->
    <li>
      <span onclick="showDisclaimer()">
        <i class="fas fa-shield-alt"></i> Disclaimer
      </span>
    </li>
  </ul>
</nav>

  <!-- Header with Working Hamburger -->
  <header>
    <div id="menu-toggle">‚ò∞</div>
    <h1>CivilCode</h1>
    <p>Welcome, <span id="username">User</span></p>
  </header>

  <!-- Main Content -->
  <main id="content">
    <div class="card">
      <h2>Welcome to CivilCode</h2>
      <p>Select any module from the sidebar to begin designing as per Indian Standards.</p>
    </div>
  </main>
       <!-- ==================== TEMPLATES (hidden) ==================== -->
  <template id="oneway-template">
    <div class="card">
      <h2>One-Way Slab Design ‚Äì IS 456:2000</h2>
      <div class="mode-grid">
        <div class="mode-card" onclick="oneWayDesign()">
          <i class="fas fa-ruler-horizontal"></i><h3>Design One-Way Slab</h3><p>Simply Supported ‚Ä¢ Continuous</p>
        </div>
      </div>
      <div id="oneway-section"></div>
      <div id="oneway-result"></div>
    </div>
  </template>

  <template id="twoway-template">
    <div class="card">
      <h2>Two-Way Slab Design ‚Äì IS 456:2000</h2>
      <div class="mode-grid">
        <div class="mode-card" onclick="twoWayDesign()">
          <i class="fas fa-th"></i><h3>Design Two-Way Slab</h3><p>All Corners Restrained</p>
        </div>
      </div>
      <div id="twoway-section"></div>
      <div id="twoway-result"></div>
    </div>
  </template>

  <template id="beam-template">
    <div class="card">
      <h2>Beam Design ‚Äì IS 456:2000</h2>
      <div class="mode-grid">
        <div class="mode-card" onclick="beamDesign()">
          <i class="fas fa-vector-square"></i><h3>Design RCC Beam</h3><p>Singly & Doubly Reinforced</p>
        </div>
      </div>
      <div id="beam-section"></div>
      <div id="beam-result"></div>
    </div>
  </template>

  <template id="column-template">
    <div class="card">
      <h2>Column Design ‚Äì IS 456:2000</h2>
      <div class="mode-grid">
        <div class="mode-card" onclick="columnDesign()">
          <i class="fas fa-columns"></i><h3>Design RCC Column</h3><p>Axial + Uniaxial Bending</p>
        </div>
      </div>
      <div id="column-section"></div>
      <div id="column-result"></div>
    </div>
  </template>

  <template id="watertank-template">
    <div class="card">
      <h2>Rectangular Water Tank ‚Äì IS 3370:2009</h2>
      <div class="mode-grid">
        <div class="mode-card" onclick="waterTankDesign()">
          <i class="fas fa-cube"></i><h3>Design UG/OH Tank</h3><p>Fixed Base ‚Ä¢ Free Top</p>
        </div>
      </div>
      <div id="watertank-section"></div>
      <div id="watertank-result"></div>
    </div>
  </template>

  <template id="staircase-template">
    <div class="card">
      <h2>Dog-Legged Staircase ‚Äì IS 456:2000</h2>
      <div class="mode-grid">
        <div class="mode-card" onclick="staircaseDesign()">
          <i class="fas fa-stairs"></i><h3>Design Staircase</h3><p>With Landing</p>
        </div>
      </div>
      <div id="staircase-section"></div>
      <div id="staircase-result"></div>
    </div>
  </template>

  <template id="crack-template">
    <div class="card">
      <h2>Crack Width Calculator ‚Äì IS 456:2000</h2>
      <div class="mode-grid">
        <div class="mode-card" onclick="crackPro()">
          <i class="fas fa-hard-hat"></i><h3>Engineer Mode</h3><p>Annex F + Table 16</p>
        </div>
      </div>
      <div id="crack-section"></div>
      <div id="crack-result"></div>
    </div>
  </template>

  <template id="devlength-template">
    <div class="card">
      <h2>Development Length Calculator ‚Äì IS 456:2000</h2>
      <div class="mode-grid">
        <div class="mode-card" onclick="devLengthPro()">
          <i class="fas fa-link"></i><h3>Calculate Ld</h3><p>Tension ‚Ä¢ Hooks ‚Ä¢ Reductions</p>
        </div>
      </div>
      <div id="dev-section"></div>
      <div id="dev-result"></div>
    </div>
  </template>

  <template id="mixdesign-template">
  <div class="card">
    <h2>Concrete Mix Design ‚Äì IS 10262:2019</h2>
    <div class="mode-grid">
      <div class="mode-card" onclick="mixDesignPro()">
        <i class="fas fa-flask"></i><h3>Design Concrete Mix</h3><p>M20 to M60 ‚Ä¢ With/Without Admixture</p>
      </div>
    </div>
    <div id="mix-section"></div>
    <div id="mix-result"></div>
  </div>
</template>

<template id="verifier-template">
  <div class="card">
    <h2>Design Verifier ‚Äì IS 456:2000</h2>
    <p>Enter the engineer's provided details to check if the beam design is safe.</p>
    <div class="mode-grid">
      <div class="mode-card" onclick="beamVerifier()">
        <i class="fas fa-vector-square"></i><h3>Verify RCC Beam</h3><p>Singly Reinforced ‚Ä¢ Simply Supported</p>
      </div>
    </div>
    <div id="verifier-section"></div>
    <div id="verifier-result"></div>
  </div>
</template>
<!-- Slab Verifier -->
<template id="slab-verifier-template">
  <div class="card">
    <h2>Slab Design Verifier ‚Äì IS 456:2000</h2>
    <p>Check if the provided slab reinforcement & thickness are safe.</p>
    <div id="slab-verifier-section"></div>
    <div id="slab-verifier-result"></div>
  </div>
</template>

<!-- Column Verifier -->
<template id="column-verifier-template">
  <div class="card">
    <h2>Column Design Verifier ‚Äì IS 456:2000</h2>
    <p>Verify axial + uniaxial column (preliminary check).</p>
    <div id="column-verifier-section"></div>
    <div id="column-verifier-result"></div>
  </div>
</template>

<!-- Footing Verifier -->
<template id="footing-verifier-template">
  <div class="card">
    <h2>Isolated Footing Verifier ‚Äì IS 456:2000</h2>
    <p>Check if size & reinforcement are adequate for load & soil.</p>
    <div id="footing-verifier-section"></div>
    <div id="footing-verifier-result"></div>
  </div>
</template>

<!-- Water Tank Verifier -->
<template id="watertank-verifier-template">
  <div class="card">
    <h2>Water Tank Verifier ‚Äì IS 3370</h2>
    <p>Check wall thickness & reinforcement for rectangular tank.</p>
    <div id="watertank-verifier-section"></div>
    <div id="watertank-verifier-result"></div>
  </div>
</template>

 <template id="disclaimer-template">
  <div class="card">
    <h2>Disclaimer</h2>
    <p style="font-size:18px;line-height:1.9;color:#444;">
      This tool is provided for educational and preliminary reference purposes only.<br><br>
      All calculations are based on simplified methods from relevant Indian Standards.<br>
      Results are not guaranteed and should never be used for final design without thorough verification.<br><br>
      <strong>Always consult and get approval from a qualified structural engineer for any real project.</strong>
    </p>
    <p style="margin-top:40px;font-size:15px;color:#777;text-align:center;">
      Created by <strong>Kiran Joshua</strong><br>
      Civil Engineer ‚Ä¢ 2025
    </p>
  </div>
</template>

  <!-- ==================== FULL IS CODES ARRAY (100+ entries) ==================== -->
  <script>
  const codeCategories = {
    "Seismic / Earthquake Resistant Design": [
      {t:"IS 13827:1993", d:"Improving Earthquake Resistance of Earthen Buildings - Guidelines", desc:"Seismic strengthening of mud & adobe houses", l:"https://archive.org/details/gov.in.is.13827.1993"},
      {t:"IS 1893 (Part 1):2016", d:"Criteria for Earthquake Resistant Design of Structures - General Provisions", desc:"Seismic zone map, response spectrum & base shear", l:"https://law.resource.org/pub/in/bis/S03/is.1893.1.2016.pdf"},
      {t:"IS 13920:2016", d:"Ductile Design and Detailing of Reinforced Concrete Structures", desc:"Seismic detailing for beams, columns & joints", l:"https://law.resource.org/pub/in/bis/S03/is.13920.2016.pdf"},
      {t:"IS 4326:2013", d:"Earthquake Resistant Design and Construction of Buildings", desc:"General provisions for masonry & RCC buildings", l:"https://law.resource.org/pub/in/bis/S03/is.4326.2013.pdf"},
      {t:"IS 16700:2017", d:"Criteria for Structural Safety of Tall Concrete Buildings", desc:"High-rise buildings >50m height", l:"https://law.resource.org/pub/in/bis/S03/is.16700.2017.pdf"},
      {t:"IS 13935:2009", d:"Guidelines for Repair & Seismic Strengthening of Buildings", desc:"Retrofitting of existing structures", l:"https://law.resource.org/pub/in/bis/S03/is.13935.2009.pdf"},
      {t:"IS 4967:1968", d:"Recommendations for Seismic Instrumentation in Structures", desc:"Strong motion accelerographs", l:"https://law.resource.org/pub/in/bis/S03/is.4967.1968.pdf"}
    ],
    "Loads on Structures": [
      {t:"IS 875 (Part 1):1987", d:"Design Loads - Dead Loads", desc:"Unit weights of building materials", l:"https://archive.org/details/gov.in.is.875.1.1987"},
      {t:"IS 875 (Part 2):1987", d:"Design Loads - Imposed Loads", desc:"Live loads for homes, offices, hospitals", l:"https://archive.org/details/gov.in.is.875.2.1987"},
      {t:"IS 875 (Part 3):2015", d:"Design Loads - Wind Loads", desc:"Basic wind speed map of India", l:"https://law.resource.org/pub/in/bis/S03/is.875.3.2015.pdf"},
      {t:"IS 875 (Part 4):1987", d:"Design Loads - Snow Loads", desc:"For Himalayan & hill stations", l:"https://archive.org/details/gov.in.is.875.4.1987"},
      {t:"IS 875 (Part 5):1987", d:"Design Loads - Special Loads & Combinations", desc:"Crane, dust, temperature effects", l:"https://archive.org/details/gov.in.is.875.5.1987"}
    ],
    "Reinforced Concrete (RCC) Design": [
      {t:"IS 456:2000", d:"Plain and Reinforced Concrete - Code of Practice", desc:"The Bible of RCC design in India", l:"https://law.resource.org/pub/in/bis/S03/is.456.2000.pdf"}
    ],
    "Steel Structures": [
      {t:"IS 800:2007", d:"General Construction in Steel - Code of Practice", desc:"Limit State Design for steel structures", l:"https://law.resource.org/pub/in/bis/S03/is.800.2007.pdf"}
    ],
    "Masonry & Brickwork": [
      {t:"IS 1905:1987", d:"Structural Use of Unreinforced Masonry", desc:"Load-bearing brick & stone masonry design", l:"https://law.resource.org/pub/in/bis/S03/is.1905.1987.pdf"},
      {t:"IS 2212:1991", d:"Code of Practice for Brickwork", desc:"Construction & quality control of brick masonry", l:"https://law.resource.org/pub/in/bis/S03/is.2212.1991.pdf"}
    ],
    "Prestressed Concrete": [
      {t:"IS 1343:2012", d:"Code of Practice for Prestressed Concrete", desc:"Pre-tensioned & post-tensioned members", l:"https://law.resource.org/pub/in/bis/S03/is.1343.2012.pdf"}
    ],
    "Liquid Retaining Structures (Water Tanks, etc.)": [
      {t:"IS 3370 (Part 1):2021", d:"Concrete Structures for Liquid Retaining - General Requirements", desc:"Water tanks & reservoirs", l:"https://law.resource.org/pub/in/bis/S03/is.3370.1.2021.pdf"},
      {t:"IS 3370 (Part 2):2021", d:"Concrete Structures for Liquid Retaining - Reinforced Concrete", desc:"Design of tank walls & base", l:"https://law.resource.org/pub/in/bis/S03/is.3370.2.2021.pdf"},
      {t:"IS 14243:1995", d:"Guidelines for Water Proofing of Underground Reservoirs", desc:"UG sump & water tanks", l:"https://archive.org/details/gov.in.is.14243.1995"}
    ],
    "Concrete Mix Design & Materials": [
      {t:"IS 10262:2019", d:"Concrete Mix Proportioning - Guidelines", desc:"M20 to M80 mix design step-by-step", l:"https://law.resource.org/pub/in/bis/S03/is.10262.2019.pdf"}
    ],
    "Steel Reinforcement & Structural Steel": [
      {t:"IS 1786:2008", d:"High Yield Strength Deformed Steel Bars (TMT)", desc:"Fe415, Fe500, Fe550, Fe600 specifications", l:"https://law.resource.org/pub/in/bis/S03/is.1786.2008.pdf"},
      {t:"IS 2062:2011", d:"Hot Rolled Medium and High Tensile Structural Steel", desc:"Steel for beams, channels & angles", l:"https://law.resource.org/pub/in/bis/S03/is.2062.2011.pdf"}
    ],
    "Soil Testing & Geotechnical": [
      {t:"IS 2720 (Part 1):1983", d:"Methods of Test for Soils - Preparation of Samples", desc:"Soil laboratory testing basics", l:"https://law.resource.org/pub/in/bis/S03/is.2720.1.1983.pdf"},
      {t:"IS 2720 (Part 4):1985", d:"Methods of Test for Soils - Grain Size Analysis", desc:"Sieve analysis & hydrometer", l:"https://law.resource.org/pub/in/bis/S03/is.2720.4.1985.pdf"},
      {t:"IS 2720 (Part 5):1985", d:"Methods of Test for Soils - Liquid & Plastic Limits", desc:"Atterberg limits determination", l:"https://law.resource.org/pub/in/bis/S03/is.2720.5.1985.pdf"},
      {t:"IS 2720 (Part 8):1983", d:"Methods of Test for Soils - Compaction Characteristics", desc:"Standard & Modified Proctor test", l:"https://law.resource.org/pub/in/bis/S03/is.2720.8.1983.pdf"},
      {t:"IS 2720 (Part 16):1987", d:"Methods of Test for Soils - CBR Test", desc:"California Bearing Ratio for pavements", l:"https://law.resource.org/pub/in/bis/S03/is.2720.16.1987.pdf"},
      {t:"IS 2720 (Part 28):1974", d:"Methods of Test for Soils - Shear Strength", desc:"Triaxial & direct shear test", l:"https://law.resource.org/pub/in/bis/S03/is.2720.28.1974.pdf"},
      {t:"IS 1498:1970", d:"Classification and Identification of Soils", desc:"USC & IS soil classification", l:"https://law.resource.org/pub/in/bis/S03/is.1498.1970.pdf"},
      {t:"IS 1892:2021", d:"Code of Practice for Subsurface Investigation", desc:"Borelog, SPT, plate load test", l:"https://law.resource.org/pub/in/bis/S03/is.1892.2021.pdf"}
    ],
    "Foundations & Piles": [
      {t:"IS 6403:1981", d:"Code of Practice for Determination of Bearing Capacity of Shallow Foundations", desc:"Safe bearing capacity calculation", l:"https://law.resource.org/pub/in/bis/S03/is.6403.1981.pdf"},
      {t:"IS 2911 (Part 1-1):2010", d:"Design and Construction of Pile Foundations - Driven Cast In-situ", desc:"Bored & driven piles", l:"https://law.resource.org/pub/in/bis/S03/is.2911.1.1.2010.pdf"},
      {t:"IS 2911 (Part 1-2):2010", d:"Design and Construction of Pile Foundations - Driven Precast", desc:"Precast RCC & steel piles", l:"https://law.resource.org/pub/in/bis/S03/is.2911.1.2.2010.pdf"},
      {t:"IS 2911 (Part 4):2013", d:"Design and Construction of Pile Foundations - Load Test", desc:"Static & dynamic pile testing", l:"https://law.resource.org/pub/in/bis/S03/is.2911.4.2013.pdf"},
      {t:"IS 14593:1998", d:"Bored Cast In-Situ Piles in Sandy Soils - Guidelines", desc:"Under-reamed & friction piles", l:"https://archive.org/details/gov.in.is.14593.1998"},
      {t:"IS 2974 (Part 1):1982", d:"Machine Foundations - Block Type", desc:"Foundations for reciprocating machines", l:"https://law.resource.org/pub/in/bis/S03/is.2974.1.1982.pdf"},
      {t:"IS 5249:1992", d:"Method of Test for Determination of Dynamic Properties of Soil", desc:"Cyclic triaxial & resonant column", l:"https://law.resource.org/pub/in/bis/S03/is.5249.1992.pdf"},
      {t:"IS 13301:1992", d:"Guidelines for Vibration Isolation for Machine Foundations", desc:"Anti-vibration mounts", l:"https://law.resource.org/pub/in/bis/S03/is.13301.1992.pdf"},
      {t:"IS 12070:1987", d:"Code of Practice for Design & Construction of Shallow Foundations on Rock", desc:"Rock socketed footings", l:"https://archive.org/details/gov.in.is.12070.1987"},
      {t:"IS 10042:1981", d:"Code of Practice for Site Investigations for Foundation on Rock", desc:"Core drilling & RQD", l:"https://archive.org/details/gov.in.is.10042.1981"}
    ],
    "Building Materials (Bricks, Blocks, Aggregates)": [
      {t:"IS 1077:1992", d:"Common Burnt Clay Building Bricks - Specification", desc:"Class designation & compressive strength", l:"https://law.resource.org/pub/in/bis/S03/is.1077.1992.pdf"},
      {t:"IS 2185 (Part 3):1984", d:"Concrete Masonry Units - Autoclaved Cellular (AAC) Blocks", desc:"Lightweight aerated blocks", l:"https://law.resource.org/pub/in/bis/S03/is.2185.3.1984.pdf"},
      {t:"IS 383:2016", d:"Coarse and Fine Aggregates for Concrete - Specification", desc:"Zone-wise sand grading", l:"https://law.resource.org/pub/in/bis/S03/is.383.2016.pdf"},
      {t:"IS 4989:2006", d:"Foamed Concrete Blocks - Specification", desc:"Cellular lightweight concrete", l:"https://law.resource.org/pub/in/bis/S03/is.4989.2006.pdf"},
      {t:"IS 2572:2005", d:"Code of Practice for Construction of Hollow Concrete Block Masonry", desc:"CLC & AAC block walls", l:"https://law.resource.org/pub/in/bis/S03/is.2572.2005.pdf"},
      {t:"IS 6041:1985", d:"Code of Practice for Construction of Autoclaved Cellular Concrete Block Masonry", desc:"AAC block construction", l:"https://law.resource.org/pub/in/bis/S03/is.6041.1985.pdf"},
      {t:"IS 6042:1969", d:"Specification for Lightweight Portland Cement", desc:"For AAC blocks", l:"https://law.resource.org/pub/in/bis/S03/is.6042.1969.pdf"}
    ],
    "Concrete Testing": [
      {t:"IS 516:1959", d:"Methods of Tests for Strength of Concrete", desc:"Cube & cylinder testing", l:"https://law.resource.org/pub/in/bis/S03/is.516.1959.pdf"},
      {t:"IS 1199:1959", d:"Methods of Sampling and Analysis of Concrete", desc:"Slump, compaction factor test", l:"https://law.resource.org/pub/in/bis/S03/is.1199.1959.pdf"}
    ],
    "Handbooks & Design Aids": [
      {t:"SP 16:1980", d:"Design Aids for Reinforced Concrete to IS 456", desc:"Ready-made tables for beams, slabs, columns", l:"https://law.resource.org/pub/in/bis/S03/is.sp.16.1980.pdf"},
      {t:"SP 34:1987", d:"Handbook on Concrete Reinforcement and Detailing", desc:"Bar bending schedules & detailing", l:"https://law.resource.org/pub/in/bis/S03/is.sp.34.1987.pdf"},
      {t:"SP 23:1982", d:"Handbook on Concrete Mixes", desc:"Mix design tables & examples", l:"https://law.resource.org/pub/in/bis/S03/is.sp.23.1982.pdf"},
      {t:"National Building Code 2016", d:"Comprehensive Building Guidelines (NBC)", desc:"Volume 1 & 2 - Architecture, Structure, Plumbing", l:"https://archive.org/details/nationalbuilding01"},
      {t:"SP 7:2016", d:"National Building Code of India (NBC 2016)", desc:"Complete building regulations", l:"https://archive.org/details/nbc2016vol1"}
    ],
    "Water Supply & Plumbing": [
      {t:"IS 3025 (Part 1):1987", d:"Methods of Sampling and Test for Water & Wastewater", desc:"Water quality testing", l:"https://law.resource.org/pub/in/bis/S03/is.3025.1.1987.pdf"},
      {t:"IS 10500:2012", d:"Drinking Water - Specification", desc:"Permissible limits for potable water", l:"https://law.resource.org/pub/in/bis/S03/is.10500.2012.pdf"},
      {t:"IS 1172:1993", d:"Code of Basic Requirements for Water Supply & Drainage", desc:"Per capita water demand", l:"https://law.resource.org/pub/in/bis/S03/is.1172.1993.pdf"},
      {t:"IS 12183 (Part 1):1987", d:"Code of Practice for Plumbing in Multi-Storeyed Buildings", desc:"Internal water supply & drainage", l:"https://archive.org/details/gov.in.is.12183.1.1987"}
    ],
    "Special & Miscellaneous": [
      {t:"IS 73:2013", d:"Paving Bitumen - Specification", desc:"VG-10, VG-30, VG-40 grades", l:"https://law.resource.org/pub/in/bis/S03/is.73.2013.pdf"},
      {t:"IS 1200 (Part 1):1992", d:"Method of Measurement - Earthwork", desc:"Excavation & filling quantities", l:"https://archive.org/details/gov.in.is.1200.1.1992"},
      {t:"IS 1200 (Part 2):1974", d:"Method of Measurement - Concrete Work", desc:"Formwork, reinforcement, concreting", l:"https://archive.org/details/gov.in.is.1200.2.1974"},
      {t:"IS 1200 (Part 5):1982", d:"Method of Measurement - Formwork", desc:"Shuttering measurement rules", l:"https://archive.org/details/gov.in.is.1200.5.1982"},
      {t:"IS 1641:2013", d:"Code of Practice for Fire Safety of Buildings", desc:"Fire resistance requirements", l:"https://law.resource.org/pub/in/bis/S03/is.1641.2013.pdf"},
      {t:"IS 12314:1988", d:"Code of Practice for Precast Concrete Construction", desc:"Factory-made beams, slabs, columns", l:"https://law.resource.org/pub/in/bis/S03/is.12314.1988.pdf"},
      {t:"IS 15916:2010", d:"Building Design and Construction Using Bamboo", desc:"Structural use of bamboo", l:"https://law.resource.org/pub/in/bis/S03/is.15916.2010.pdf"},
      {t:"IS 15917:2010", d:"Guidelines for Use of Bamboo in Building Construction", desc:"Joints, treatment & durability", l:"https://law.resource.org/pub/in/bis/S03/is.15917.2010.pdf"},
      {t:"IS 4990:2011", d:"Plywood for Concrete Shuttering Work - Specification", desc:"Film-faced shuttering plywood", l:"https://law.resource.org/pub/in/bis/S03/is.4990.2011.pdf"},
      {t:"IS 9103:1999", d:"Specification for Admixtures for Concrete", desc:"Superplasticizers & retarders", l:"https://law.resource.org/pub/in/bis/S03/is.9103.1999.pdf"},
      {t:"IS 14858:2000", d:"Requirements for Compression Testing Machine", desc:"CTM calibration", l:"https://law.resource.org/pub/in/bis/S03/is.14858.2000.pdf"},
      {t:"IS 9013:1978", d:"Method of Making and Curing Concrete Test Specimens", desc:"Cube & beam curing", l:"https://law.resource.org/pub/in/bis/S03/is.9013.1978.pdf"},
      {t:"IS 8142:1976", d:"Specification for Timber for Use in Construction", desc:"Sal, Teak, Deodar classification", l:"https://law.resource.org/pub/in/bis/S03/is.8142.1976.pdf"},
      {t:"IS 883:1994", d:"Code of Practice for Design of Structural Timber", desc:"Working stress method for timber", l:"https://law.resource.org/pub/in/bis/S03/is.883.1994.pdf"},
      {t:"IS 3812 (Part 1):2013", d:"Pulverized Fuel Ash (Fly Ash) for Concrete", desc:"Class F & Class C fly ash", l:"https://law.resource.org/pub/in/bis/S03/is.3812.1.2013.pdf"},
      {t:"IS 15388:2003", d:"Silica Fume - Specification", desc:"Microsilica for high-strength concrete", l:"https://law.resource.org/pub/in/bis/S03/is.15388.2003.pdf"},
      {t:"IS 2645:2003", d:"Integral Waterproofing Compounds for Cement Mortar", desc:"Liquid & powder compounds", l:"https://law.resource.org/pub/in/bis/S03/is.2645.2003.pdf"},
      {t:"IS 3085:1965", d:"Method of Test for Permeability of Cement Mortar", desc:"Waterproofing efficiency test", l:"https://law.resource.org/pub/in/bis/S03/is.3085.1965.pdf"},
      {t:"IS 14687:1999", d:"Guidelines for Falsework for Concrete Structures", desc:"Shuttering safety", l:"https://law.resource.org/pub/in/bis/S03/is.14687.1999.pdf"},
      {t:"IS 4995 (Part 1):1974", d:"Criteria for Design of Reinforced Concrete Bins", desc:"Silos & bunkers", l:"https://law.resource.org/pub/in/bis/S03/is.4995.1.1974.pdf"},
      {t:"IS 11089:1984", d:"Code of Practice for Design & Construction of Ring Foundation", desc:"Circular raft for chimneys", l:"https://archive.org/details/gov.in.is.11089.1984"},
      {t:"IS 9556:1980", d:"Code of Practice for Design & Construction of Conical Roof", desc:"Conical shells", l:"https://archive.org/details/gov.in.is.9556.1980"},
      {t:"IS 2204:1962", d:"Code of Practice for Construction of Reinforced Concrete Shell Roof", desc:"Cylindrical & hyperbolic paraboloid", l:"https://law.resource.org/pub/in/bis/S03/is.2204.1962.pdf"},
      {t:"IS 11504:1985", d:"Criteria for Structural Design of Reinforced Concrete Natural Draught Cooling Towers", desc:"Hyperbolic cooling towers", l:"https://law.resource.org/pub/in/bis/S03/is.11504.1985.pdf"},
      {t:"IS 4091:1979", d:"Code of Practice for Design & Construction of Foundations for Transmission Line Towers", desc:"Tower footing", l:"https://law.resource.org/pub/in/bis/S03/is.4091.1979.pdf"},
      {t:"IS 11233:1985", d:"Code of Practice for Design & Construction of Radar Antenna Foundations", desc:"Radar & microwave towers", l:"https://archive.org/details/gov.in.is.11233.1985"},
      {t:"IS 13094:1992", d:"Selection of Ground Improvement Techniques", desc:"Vibroflotation, stone columns", l:"https://law.resource.org/pub/in/bis/S03/is.13094.1992.pdf"},
      {t:"IS 15284 (Part 1):2003", d:"Design & Construction of Stone Columns", desc:"Vibro-replacement method", l:"https://law.resource.org/pub/in/bis/S03/is.15284.1.2003.pdf"},
      {t:"IS 9178 (Part 1):1979", d:"Criteria for Design of Steel Bins for Storage of Bulk Materials", desc:"Square & circular bins", l:"https://law.resource.org/pub/in/bis/S03/is.9178.1.1979.pdf"},
      {t:"IS 8041:1990", d:"Specification for Rapid Hardening Portland Cement", desc:"Type II cement", l:"https://law.resource.org/pub/in/bis/S03/is.8041.1990.pdf"},
      {t:"IS 12600:1989", d:"Low Heat Portland Cement - Specification", desc:"For mass concrete dams", l:"https://law.resource.org/pub/in/bis/S03/is.12600.1989.pdf"},
      {t:"IS 6452:1989", d:"High Alumina Cement for Structural Use", desc:"Calcium aluminate cement", l:"https://law.resource.org/pub/in/bis/S03/is.6452.1989.pdf"},
      {t:"IS 6909:1990", d:"Supersulphated Cement - Specification", desc:"Blast furnace slag cement", l:"https://law.resource.org/pub/in/bis/S03/is.6909.1990.pdf"},
      {t:"IS 455:2015", d:"Portland Slag Cement - Specification", desc:"PSC for marine structures", l:"https://law.resource.org/pub/in/bis/S03/is.455.2015.pdf"},
      {t:"IS 1489 (Part 2):2015", d:"Portland Pozzolana Cement - Calcined Clay Based", desc:"PPC with calcined clay", l:"https://law.resource.org/pub/in/bis/S03/is.1489.2.2015.pdf"},
      {t:"IS 16415:2015", d:"Composite Cement - Specification", desc:"Blended cement with fly ash + slag", l:"https://law.resource.org/pub/in/bis/S03/is.16415.2015.pdf"},
      {t:"IS 3466:1988", d:"Masonry Cement - Specification", desc:"For plastering & masonry", l:"https://law.resource.org/pub/in/bis/S03/is.3466.1988.pdf"},
      {t:"IS 4031 (All Parts)", d:"Methods of Physical Tests for Hydraulic Cement", desc:"Fineness, setting time, strength", l:"https://law.resource.org/pub/in/bis/S03/is.4031.1.1996.pdf"},
      {t:"IS 12269:2013", d:"Ordinary Portland Cement 53 Grade - Specification", desc:"High early strength", l:"https://law.resource.org/pub/in/bis/S03/is.12269.2013.pdf"},
      {t:"IS 8042:2015", d:"White Portland Cement - Specification", desc:"For architectural & tile grout", l:"https://law.resource.org/pub/in/bis/S03/is.8042.2015.pdf"}
    ]
  };

  const countries = {
    "India": codeCategories,
"Europe (Eurocodes)": {
    "Basis of Structural Design": [
      {t:"EN 1990:2002", d:"Eurocode - Basis of structural design", desc:"Fundamental principles, safety, serviceability", l:"https://www.phd.eng.br/wp-content/uploads/2015/12/en.1990.2002.pdf"}
    ],
    "Actions on Structures": [
      {t:"EN 1991-1-1:2002", d:"Eurocode 1 - Densities, self-weight, imposed loads", desc:"Dead & live loads for buildings", l:"https://www.phd.eng.br/wp-content/uploads/2015/12/en.1991.1.1.2002.pdf"},
      {t:"EN 1991-1-3:2003", d:"Eurocode 1 - Snow loads", desc:"Snow load maps & factors", l:"https://www.phd.eng.br/wp-content/uploads/2015/12/en.1991.1.3.2003.pdf"},
      {t:"EN 1991-1-4:2005", d:"Eurocode 1 - Wind actions", desc:"Wind speed maps & pressure coefficients", l:"https://www.phd.eng.br/wp-content/uploads/2015/12/en.1991.1.4.2005.pdf"}
    ],
    "Concrete Structures": [
      {t:"EN 1992-1-1:2004", d:"Eurocode 2 - Design of concrete structures - General rules", desc:"The main RCC code for Europe", l:"https://www.phd.eng.br/wp-content/uploads/2015/12/en.1992.1.1.2004.pdf"},
      {t:"EN 1992-1-2:2004", d:"Eurocode 2 - Structural fire design", desc:"Fire resistance of concrete structures", l:"https://www.phd.eng.br/wp-content/uploads/2015/12/en.1992.1.2.2004.pdf"}
    ],
    "Steel Structures": [
      {t:"EN 1993-1-1:2005", d:"Eurocode 3 - Design of steel structures - General rules", desc:"Main steel design code", l:"https://www.phd.eng.br/wp-content/uploads/2015/12/en.1993.1.1.2005.pdf"},
      {t:"EN 1993-1-8:2005", d:"Eurocode 3 - Design of joints", desc:"Bolted & welded connections", l:"https://www.phd.eng.br/wp-content/uploads/2015/12/en.1993.1.8.2005.pdf"}
    ],
    "Seismic Design": [
      {t:"EN 1998-1:2004", d:"Eurocode 8 - Design for earthquake resistance - General rules", desc:"Seismic actions & building design", l:"https://www.phd.eng.br/wp-content/uploads/2015/12/en.1998.1.2004.pdf"}
    ],
    "Geotechnical Design": [
      {t:"EN 1997-1:2004", d:"Eurocode 7 - Geotechnical design - General rules", desc:"Foundations, retaining walls, slopes", l:"https://www.phd.eng.br/wp-content/uploads/2015/12/en.1997.1.2004.pdf"}
    ]
  },
  "United States": {
    "Building Loads": [
      {t:"ASCE 7-22", d:"Minimum Design Loads and Associated Criteria for Buildings", desc:"Wind, seismic, snow, rain, flood loads", l:"https://sp360.asce.org/PersonifyEbusiness/Bookstore/Product-Details/productId/282597314"},
      {t:"ASCE 7-16 (Free older version)", d:"Minimum Design Loads (2016)", desc:"Still widely used", l:"https://ascelibrary.org/doi/book/10.1061/9780784414248"} // Note: full PDF behind paywall, but summaries available
    ],
    "Concrete Structures": [
      {t:"ACI 318-19", d:"Building Code Requirements for Structural Concrete", desc:"The Bible of US RCC design", l:"https://www.concrete.org/store/productdetail.aspx?ItemID=31819"},
      {t:"ACI 318-14 (Older free version)", d:"Building Code Requirements (2014)", desc:"Commonly referenced", l:"https://www.concrete.org/Portals/0/Files/PDF/318-14_errata.pdf"} // Errata, but main often shared
    ],
    "Steel Structures": [
      {t:"AISC 360-22", d:"Specification for Structural Steel Buildings", desc:"Latest LRFD/ASD steel code", l:"https://www.aisc.org/globalassets/aisc/publications/standards/a360-22-specification-and-commentary.pdf"},
      {t:"AISC 360-16 (Free)", d:"Specification for Structural Steel Buildings", desc:"Most widely used version", l:"https://www.aisc.org/globalassets/aisc/publications/standards/a360-16-specification-and-commentary.pdf"},
      {t:"AISC 341-22", d:"Seismic Provisions for Structural Steel Buildings", desc:"Ductile detailing for seismic", l:"https://www.aisc.org/globalassets/aisc/publications/standards/seismic-provisions-for-structural-steel-buildings-ansi-aisc-341-22.pdf"}
    ],
    "Masonry & Other": [
      {t:"TMS 402/602-22", d:"Building Code Requirements and Specification for Masonry Structures", desc:"US masonry design", l:"https://masonrysociety.org/product/tms-402-602-22-building-code-requirements-and-specification-for-masonry-structures/"}
    ]
  },
    "Japan": {
      "Building Standard Law": [
        {t:"Building Standard Law of Japan (English)", d:"Includes seismic provisions", desc:"Main Japanese building code", l:"https://iisee.kenken.go.jp/worldlist/31_Japan/31_Japan_1_Building_Code_2020.pdf"}
      ]
    }
  };

  function showCodalProvisions() {
    let html = `<div class="card"><h2>Select Country / Region</h2>
      <p style="margin-bottom:30px;font-size:17px;">Choose a country to view its structural design codes</p>
      <div class="mode-grid">`;

    Object.keys(countries).forEach(country => {
      const flag = country === "India" ? "üáÆüá≥" : 
                   country.includes("Europe") ? "üá™üá∫" : 
                   country.includes("United") ? "üá∫üá∏" : "üáØüáµ";
      html += `<div class="mode-card" onclick="showCountryCodes('${country}')">
        <h3 style="font-size:48px;margin-bottom:10px;">${flag}</h3>
        <h3>${country}</h3>
        <p>View categorized codes</p>
      </div>`;
    });

    html += `</div></div>`;
    document.getElementById('content').innerHTML = html;
  }
  function drawBeamSection(b, D, d, barDia, numBarsTension, numBarsComp = 0) {
  const svg = `
    <svg width="400" height="300" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg" style="background:#f9f9f9;border:1px solid #ccc;margin-top:20px;">
      <!-- Beam outline -->
      <rect x="50" y="50" width="300" height="${D*200/500}" fill="none" stroke="#333" stroke-width="3"/>
      <!-- Effective depth line -->
      <line x1="50" y1="${50 + 25*200/500}" x2="350" y2="${50 + 25*200/500}" stroke="#666" stroke-dasharray="5,5"/>
      <text x="360" y="${50 + 25*200/500 + 10}" font-size="14">Cover + stirrup</text>
      
      <!-- Tension bars (bottom) -->
      ${Array(numBarsTension).fill().map((_, i) => {
        const spacing = 300 / (numBarsTension + 1);
        const x = 50 + spacing * (i + 1);
        return `<circle cx="${x}" cy="${50 + D*200/500 - 30}" r="${barDia*10}" fill="#d00" stroke="#000"/>
                <text x="${x}" y="${50 + D*200/500 + 10}" font-size="12" text-anchor="middle">œÜ${barDia}</text>`;
      }).join('')}
      
      <!-- Compression bars (top, if any) -->
      ${numBarsComp > 0 ? Array(numBarsComp).fill().map((_, i) => {
        const spacing = 300 / (numBarsComp + 1);
        const x = 50 + spacing * (i + 1);
        return `<circle cx="${x}" cy="${50 + 30}" r="${barDia*10}" fill="#00d" stroke="#000"/>`;
      }).join('') : ''}
      
      <!-- Dimensions -->
      <text x="180" y="40" font-size="16" text-anchor="middle">${b} mm width</text>
      <text x="20" y="150" font-size="16">${D} mm depth</text>
    </svg>
  `;
  return svg;
}

  function showCountryCodes(country) {
    const codeCats = countries[country];
    let html = `<div class="card"><h2>${country} Structural Codes</h2>
      <button class="btn-calc" onclick="showCodalProvisions()" style="width:auto;padding:12px 24px;margin-bottom:20px;">‚Üê Back to Countries</button>`;

    Object.keys(codeCats).forEach(category => {
      const codes = codeCats[category];
      html += `
        <div class="code-category">
          <h3 class="category-title" onclick="this.parentElement.classList.toggle('open')">${category} (${codes.length})</h3>
          <div class="code-grid category-grid">`;
      codes.forEach(c => {
        html += `<div class="code-card">
          <h3>${c.t}</h3>
          <p style="font-size:15px;color:#555;line-height:1.6;">${c.d}</p>
          <a href="${c.l}" target="_blank">Open PDF</a>
        </div>`;
      });
      html += `</div></div>`;
    });

    html += `</div>`;
    document.getElementById('content').innerHTML = html;
  }
</script>
     <script>

      function showDesignHub() {
  document.getElementById('content').innerHTML = `
    <div class="card" style="padding:40px;">
      <h2 style="text-align:center; margin-bottom:35px; font-size:36px; color:var(--primary);">
        Choose Design Category
      </h2>
      
      <div style="display:flex; justify-content:center; gap:50px; flex-wrap:wrap;">
        <!-- RCC Card -->
        <div class="mode-card" 
             style="width:420px; padding:50px 30px; cursor:pointer; transition:all 0.4s;"
             onclick="showRccDesignGrid()">
          <i class="fas fa-building-columns" style="font-size:110px; color:var(--primary); margin-bottom:25px;"></i>
          <h3 style="font-size:32px; margin-bottom:15px;">RCC Design</h3>
          <p style="font-size:18px; color:#555; line-height:1.5;">
            Slabs ‚Ä¢ Beams ‚Ä¢ Columns ‚Ä¢ Water Tanks ‚Ä¢ Staircases ‚Ä¢ Mix Design
          </p>
        </div>

        <!-- Steel Card -->
        <div class="mode-card" 
             style="width:420px; padding:50px 30px; cursor:pointer; transition:all 0.4s;"
             onclick="showSteelDesignGrid()">
          <i class="fas fa-grip-lines-vertical" style="font-size:110px; color:var(--primary); margin-bottom:25px;"></i>
          <h3 style="font-size:32px; margin-bottom:15px;">Steel Design</h3>
          <p style="font-size:18px; color:#555; line-height:1.5;">
            Beams ‚Ä¢ Columns ‚Ä¢ Tension Members ‚Ä¢ Connections ‚Ä¢ Base Plates
          </p>
        </div>
      </div>

      <div style="text-align:center; margin-top:60px;">
        <button class="btn-calc" 
                onclick="showHome()" 
                style="padding:16px 50px; font-size:20px;">
          ‚Üê Back to Home
        </button>
      </div>
    </div>
  `;
}


    function toggleSub(id) {
      document.getElementById(id).classList.toggle('active');
    }

    // Show the verifier page
function showVerifier() {
  document.getElementById('content').innerHTML = document.getElementById('verifier-template').innerHTML;
  beamVerifier();  // Start with beam verifier form
}

// Load the beam verifier form
function beamVerifier() {
  document.getElementById('verifier-section').innerHTML = `
    <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">Beam Design Verifier (IS 456:2000)</h3>
    <label>Span L (m)</label><input type="number" id="span_v" value="5.0" step="0.1">
    <label>Width b (mm)</label><input type="number" id="b_v" value="300">
    <label>Provided Depth D (mm)</label><input type="number" id="D_v" value="500">
    <label>Dead Load excl. self wt (kN/m)</label><input type="number" id="DL_v" value="15">
    <label>Live Load (kN/m)</label><input type="number" id="LL_v" value="20">
    <label>Concrete Grade</label><select id="fck_v"><option value="20">M20</option><option value="25" selected>M25</option><option value="30">M30</option></select>
    <label>Steel Grade</label><select id="fy_v"><option value="415">Fe415</option><option value="500" selected>Fe500</option></select>
    <label>Provided Main Steel Area Ast (mm¬≤)</label><input type="number" id="Ast_v" value="1000" placeholder="e.g., for 4œÜ16 = 804 mm¬≤">
    <button class="btn-calc" onclick="verifyBeam()">Verify Design</button>
  `;
}
// === SLAB VERIFIER ===
function showSlabVerifier() {
  document.getElementById('content').innerHTML = document.getElementById('slab-verifier-template').innerHTML;
  slabVerifier();
}

function slabVerifier() {
  document.getElementById('slab-verifier-section').innerHTML = `
    <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">Slab Verifier (One-Way or Two-Way)</h3>
    <label>Short Span Lx (m)</label><input type="number" id="Lx_s" value="4.0" step="0.1">
    <label>Long Span Ly (m) ‚Äì leave same as Lx for one-way</label><input type="number" id="Ly_s" value="4.0" step="0.1">
    <label>Provided Depth D (mm)</label><input type="number" id="D_s" value="130">
    <label>Live Load (kN/m¬≤)</label><input type="number" id="LL_s" value="3.0">
    <label>Floor Finish (kN/m¬≤)</label><input type="number" id="FF_s" value="1.0">
    <label>Concrete Grade</label><select id="fck_s"><option value="20">M20</option><option value="25" selected>M25</option></select>
    <label>Steel Grade</label><select id="fy_s"><option value="415">Fe415</option><option value="500" selected>Fe500</option></select>
    <label>Provided Ast short direction (mm¬≤/m)</label><input type="number" id="Ast_s" value="400" placeholder="e.g., œÜ10@200 = 393 mm¬≤/m">
    <button class="btn-calc" onclick="verifySlab()">Verify Slab</button>
  `;
}

function verifySlab() {
  const Lx = parseFloat(document.getElementById('Lx_s').value);
  const Ly = parseFloat(document.getElementById('Ly_s').value);
  const D = parseFloat(document.getElementById('D_s').value);
  const LL = parseFloat(document.getElementById('LL_s').value);
  const FF = parseFloat(document.getElementById('FF_s').value);
  const fck = parseFloat(document.getElementById('fck_s').value);
  const fy = parseFloat(document.getElementById('fy_s').value);
  const Ast_prov = parseFloat(document.getElementById('Ast_s').value); // mm¬≤/m in short direction

  const d = D - 25; // effective depth
  const DL = D / 1000 * 25; // self-weight
  const wu = 1.5 * (DL + LL + FF);

  const ratio = Ly / Lx;
  const isOneWay = ratio >= 2;

  let Mu_max;
  if (isOneWay) {
    // One-way, simply supported conservative
    Mu_max = wu * Lx * Lx / 8; // kNm/m
  } else {
    // Two-way, approximate interior panel (Table 26)
    let coeff = 0.09; // short span negative
    if (ratio > 1.5) coeff = 0.07;
    Mu_max = coeff * wu * Lx * Lx;
  }

  // Required Ast (short direction)
  const Ast_req = (Mu_max * 1e6) / (0.87 * fy * d * 0.92);

  // Min steel
  const minPt = fy > 415 ? 0.08 : 0.12;
  const minAst = minPt / 100 * 1000 * D;
  const Ast_final = Math.max(Ast_req, minAst);

  // Deflection check (short span)
  const basicRatio = isOneWay ? 20 : 35;
  const deflRatio = Lx * 1000 / d;
  const deflOk = deflRatio <= basicRatio;

  // Verdict
  const steelOk = Ast_prov >= Ast_final;
  const overall = steelOk && deflOk ? 'SAFE' : 'REVISE';

  document.getElementById('slab-verifier-result').innerHTML = `
    <div class="result ${overall === 'SAFE' ? '' : 'fail'}">
      <h3 style="color:${overall === 'SAFE' ? '#27ae60' : '#c0392b'}">
        SLAB VERIFIER (IS 456:2000) - ${overall}
      </h3>
      <strong>Type:</strong> ${isOneWay ? 'One-Way' : 'Two-Way'} Slab (Ly/Lx = ${ratio.toFixed(2)})<br>
      <strong>Required Mu:</strong> ${Mu_max.toFixed(2)} kNm/m<br>
      <strong>Required Ast (short dir.):</strong> ${Ast_final.toFixed(0)} mm¬≤/m (min ${minAst.toFixed(0)})<br>
      <strong>Provided Ast:</strong> ${Ast_prov} mm¬≤/m ‚Üí ${steelOk ? 'OK' : 'Insufficient'}<br>
      <strong>Deflection:</strong> Lx/d = ${deflRatio.toFixed(1)} ‚â§ ${basicRatio} ‚Üí ${deflOk ? 'OK' : 'Fails'}<br>
      <br>
      <strong>Final Verdict:</strong> ${overall} - ${overall === 'SAFE' ? 'Slab is adequate' : 'Revise thickness or reinforcement'}<br>
      <em>Note: Preliminary check. For two-way, add torsion steel at corners.</em>
    </div>
  `;
}

// === COLUMN VERIFIER ===
function showColumnVerifier() {
  document.getElementById('content').innerHTML = document.getElementById('column-verifier-template').innerHTML;
  columnVerifier();
}

function columnVerifier() {
  document.getElementById('column-verifier-section').innerHTML = `
    <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">Column Verifier</h3>
    <label>Axial Load Pu (kN)</label><input type="number" id="Pu_c" value="1200">
    <label>Moment Mu (kNm)</label><input type="number" id="Mu_c" value="150">
    <label>Provided Size (mm √ó mm)</label><input type="number" id="side_c" value="450">
    <label>Provided Steel Area Asc (mm¬≤)</label><input type="number" id="Asc_c" value="2500">
    <label>Concrete Grade</label><select id="fck_c"><option value="25" selected>M25</option><option value="30">M30</option></select>
    <button class="btn-calc" onclick="verifyColumn()">Verify Column</button>
  `;
}

function verifyColumn() {
  const Pu = parseFloat(document.getElementById('Pu_c').value) * 1000; // kN ‚Üí N
  const Mu = parseFloat(document.getElementById('Mu_c').value) * 1e6; // kNm ‚Üí Nmm
  const side = parseFloat(document.getElementById('side_c').value); // mm
  const Asc_prov = parseFloat(document.getElementById('Asc_c').value); // mm¬≤
  const fck = parseFloat(document.getElementById('fck_c').value);

  const Ag = side * side;

  // 1. Slenderness check (assume braced, k ‚âà 0.85 for typical building)
  const le = 0.85 * side * 4; // conservative unsupported length ‚âà 4m (adjust if needed)
  const slenderness = le / side;
  const slendernessOk = slenderness <= 12 ? 'Short Column' : 'Slender ‚Äì Needs additional moment';

  // 2. Axial capacity (Cl. 39.3, short column)
  const PuCap = 0.4 * fck * (Ag - Asc_prov) + 0.67 * fy * Asc_prov; // fy assumed 500

  // 3. Approximate uniaxial moment capacity (conservative)
  const MuCap = 0.12 * fck * side * side * side / 1e6; // kNm (rough from SP 16)

  // 4. Interaction ratio (linear approximation, conservative)
  const interaction = (Pu / PuCap) + (Mu / MuCap);
  const capacityStatus = interaction <= 1 ? 'SAFE' : 'UNSAFE ‚Äì Increase size or steel';

  // 5. Minimum steel check (Cl. 26.5.3.1)
  const minAsc = 0.008 * Ag; // 0.8%
  const steelStatus = Asc_prov >= minAsc ? 'OK' : 'Insufficient ‚Äì Min 0.8% required';

  // Overall verdict
  const overall = (capacityStatus === 'SAFE' && steelStatus === 'OK' && slendernessOk.includes('Short')) ? 'SAFE' : 'REVISE';

  document.getElementById('column-verifier-result').innerHTML = `
    <div class="result ${overall === 'SAFE' ? '' : 'fail'}">
      <h3 style="color:${overall === 'SAFE' ? '#27ae60' : '#c0392b'}">
        COLUMN VERIFIER (IS 456:2000 / SP 16) - ${overall}
      </h3>
      <strong>Provided Size:</strong> ${side} √ó ${side} mm (Ag = ${Ag.toLocaleString()} mm¬≤)<br>
      <strong>Factored Pu:</strong> ${(Pu/1000).toFixed(0)} kN<br>
      <strong>Factored Mu:</strong> ${(Mu/1e6).toFixed(1)} kNm<br>
      <strong>Axial Capacity:</strong> ${(PuCap/1000).toFixed(0)} kN ‚Üí ${Pu <= PuCap ? 'OK' : 'Exceeds'}<br>
      <strong>Moment Capacity (approx):</strong> ${MuCap.toFixed(1)} kNm ‚Üí ${Mu <= MuCap ? 'OK' : 'Exceeds'}<br>
      <strong>Interaction Ratio:</strong> ${interaction.toFixed(2)} ‚â§ 1 ‚Üí ${capacityStatus}<br>
      <strong>Slenderness:</strong> le/D = ${slenderness.toFixed(1)} ‚Üí ${slendernessOk}<br>
      <strong>Steel Provided:</strong> ${Asc_prov.toLocaleString()} mm¬≤ ‚Üí ${steelStatus}<br>
      <br>
      <strong>Final Verdict:</strong> ${overall} - ${overall === 'SAFE' ? 'Column is adequate' : 'Revise size, steel or check slenderness'}<br>
      <em>Note: Simplified uniaxial check. For biaxial or slender columns, use full SP 16 charts.</em>
    </div>
  `;
}
// === FOOTING VERIFIER ===
function showFootVerifier() {
  document.getElementById('content').innerHTML = document.getElementById('footing-verifier-template').innerHTML;
  footingVerifier();
}

function footingVerifier() {
  document.getElementById('footing-verifier-section').innerHTML = `
    <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">Isolated Footing Verifier</h3>
    <label>Axial Load (kN)</label><input type="number" id="Pu_f" value="1200">
    <label>Soil SBC (kN/m¬≤)</label><input type="number" id="sbc" value="150">
    <label>Provided Size (m √ó m)</label><input type="number" id="size_f" value="2.5" step="0.1">
    <label>Provided Depth D (mm)</label><input type="number" id="D_f" value="500">
    <label>Provided Ast (mm¬≤ total)</label><input type="number" id="Ast_f" value="1800">
    <button class="btn-calc" onclick="verifyFooting()">Verify Footing</button>
  `;
}
function verifyFooting() {
  const Pu = parseFloat(document.getElementById('Pu_f').value); // kN
  const sbc = parseFloat(document.getElementById('sbc').value); // kN/m¬≤
  const size = parseFloat(document.getElementById('size_f').value); // m (square side)
  const D = parseFloat(document.getElementById('D_f').value); // mm
  const Ast_prov = parseFloat(document.getElementById('Ast_f').value); // mm¬≤ total

  const area_prov = size * size; // m¬≤
  const area_req = Pu / (sbc * 0.6); // 60% of SBC for safety factor (typical)

  const d = D - 75; // eff depth (cover 50mm + half bar 20mm)

  // 1. Area check
  const areaOk = area_prov >= area_req;

  // 2. Punching shear check (Cl. 31.6.3)
  const bo = 4 * (size * 1000 + d); // perimeter at d/2 from column face, assume square column = size
  const Vu_punch = Pu * 1000; // N
  const tau_v = Vu_punch / (bo * d); // MPa
  const tau_c_punch = 0.25 * Math.sqrt(fck); // MPa (Cl. 31.6.3)
  const punchingOk = tau_v <= tau_c_punch;

  // 3. Bending moment & steel check (one-way shear critical section at face)
  const M = (Pu / 2) * (size / 2 - 0.5) ** 2; // approx for square footing, kNm (conservative)
  const Ast_req = (M * 1e6) / (0.87 * fy * d * 0.92); // mm¬≤/m
  const Ast_prov_per_m = Ast_prov / size; // mm¬≤/m
  const steelOk = Ast_prov_per_m >= Ast_req;

  // Overall verdict
  const overall = areaOk && punchingOk && steelOk ? 'SAFE' : 'REVISE';

  document.getElementById('footing-verifier-result').innerHTML = `
    <div class="result ${overall === 'SAFE' ? '' : 'fail'}">
      <h3 style="color:${overall === 'SAFE' ? '#27ae60' : '#c0392b'}">
        ISOLATED FOOTING VERIFIER (IS 456:2000) - ${overall}
      </h3>
      <strong>Factored Load Pu:</strong> ${Pu.toFixed(0)} kN<br>
      <strong>Soil SBC:</strong> ${sbc} kN/m¬≤<br>
      <strong>Required Area:</strong> ${area_req.toFixed(2)} m¬≤ ‚Üí Provided: ${area_prov.toFixed(2)} m¬≤ (${areaOk ? 'OK' : 'Too small'})<br>
      <strong>Punching Shear:</strong> œÑv = ${tau_v.toFixed(2)} MPa ‚â§ œÑc = ${tau_c_punch.toFixed(2)} MPa ‚Üí ${punchingOk ? 'OK' : 'Fails'}<br>
      <strong>Bending Moment (approx):</strong> ${M.toFixed(1)} kNm<br>
      <strong>Required Ast:</strong> ${Ast_req.toFixed(0)} mm¬≤/m ‚Üí Provided: ${Ast_prov_per_m.toFixed(0)} mm¬≤/m (${steelOk ? 'OK' : 'Insufficient'})<br>
      <br>
      <strong>Final Verdict:</strong> ${overall} - ${overall === 'SAFE' ? 'Footing is adequate' : 'Revise size, depth or reinforcement'}<br>
      <em>Note: Assumes square footing. For rectangular or eccentric load, use full analysis.</em>
    </div>
  `;
}
// === WATER TANK VERIFIER ===
function showWaterTankVerifier() {
  document.getElementById('content').innerHTML = document.getElementById('watertank-verifier-template').innerHTML;
  waterTankVerifier();
}

function waterTankVerifier() {
  document.getElementById('watertank-verifier-section').innerHTML = `
    <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">Rectangular Water Tank Verifier</h3>
    <label>Internal Length L (m)</label><input type="number" id="L_t" value="5.0" step="0.1">
    <label>Internal Width B (m)</label><input type="number" id="B_t" value="4.0" step="0.1">
    <label>Water Depth H (m)</label><input type="number" id="H_t" value="3.5" step="0.1">
    <label>Provided Wall Thickness (mm)</label><input type="number" id="D_t" value="250">
    <label>Provided Ast (mm¬≤/m both faces)</label><input type="number" id="Ast_t" value="900">
    <button class="btn-calc" onclick="verifyWaterTank()">Verify Tank</button>
  `;
}

function verifyWaterTank() {
  const L = parseFloat(document.getElementById('L_t').value);
  const B = parseFloat(document.getElementById('B_t').value);
  const H = parseFloat(document.getElementById('H_t').value);
  const D_prov = parseFloat(document.getElementById('D_t').value); // provided wall thickness mm
  const Ast_prov = parseFloat(document.getElementById('Ast_t').value); // mm¬≤/m both faces

  const d = D_prov - 50; // eff depth (cover 40mm + half bar 12mm typical)

  // 1. Hydrostatic pressure at base
  const p_base = 10 * H; // kN/m¬≤

  // 2. Max moment (long wall, fixed base, free top)
  const M_max = p_base * H * H / 12; // kNm/m (conservative)

  // 3. Required thickness (approx from moment, M25 typical)
  const fck = 25;
  const D_req_moment = Math.ceil(Math.sqrt(M_max * 1e6 / (0.138 * fck * 1000)) + 50);
  const D_min_table = 150 + 30 * H; // rough IS 3370 Table 1 guidance
  const D_min = Math.max(200, D_min_table, D_req_moment);

  const thicknessOk = D_prov >= D_min;

  // 4. Required steel (both faces)
  const Ast_req = M_max * 1e6 / (0.87 * 500 * d * 0.92); // Fe500 typical
  const Ast_min = 0.003 * 1000 * D_prov; // 0.3% min (IS 3370)
  const Ast_final = Math.max(Ast_req, Ast_min);

  const steelOk = Ast_prov >= Ast_final;

  // 5. Crack width check (IS 3370 Cl. 3.3)
  const fs = 0.58 * 500 * Ast_prov / (0.003 * 1000 * D_prov); // service stress
  const acr = 40 + 12 / 2; // cover 40mm + half bar
  const h = D_prov;
  const xu = 0.48 * d;
  const eps_m = fs / 200000;
  const w_cr = 3 * acr * eps_m / (1 + 2 * (acr - 40) / (h - xu));
  const crackOk = w_cr <= 0.2;

  // Overall verdict
  const overall = thicknessOk && steelOk && crackOk ? 'SAFE' : 'REVISE';

  document.getElementById('watertank-verifier-result').innerHTML = `
    <div class="result ${overall === 'SAFE' ? '' : 'fail'}">
      <h3 style="color:${overall === 'SAFE' ? '#27ae60' : '#c0392b'}">
        WATER TANK VERIFIER (IS 3370:2009) - ${overall}
      </h3>
      <strong>Water Depth:</strong> ${H.toFixed(1)} m | Pressure: ${p_base.toFixed(1)} kN/m¬≤<br>
      <strong>Provided Thickness:</strong> ${D_prov} mm (Min required ‚âà ${Math.round(D_min)} mm) ‚Üí ${thicknessOk ? 'OK' : 'Too thin'}<br>
      <strong>Max Moment:</strong> ${M_max.toFixed(2)} kNm/m<br>
      <strong>Required Ast (both faces):</strong> ${Ast_final.toFixed(0)} mm¬≤/m (min 0.3%)<br>
      <strong>Provided Ast:</strong> ${Ast_prov} mm¬≤/m ‚Üí ${steelOk ? 'OK' : 'Insufficient'}<br>
      <strong>Crack Width:</strong> ${w_cr.toFixed(3)} mm ‚â§ 0.2 mm ‚Üí ${crackOk ? 'OK' : 'Fails'}<br>
      <br>
      <strong>Final Verdict:</strong> ${overall} - ${overall === 'SAFE' ? 'Tank design is adequate for liquid retention' : 'Revise thickness, steel or check crack width'}<br>
      <em>Note: Assumes rectangular tank, fixed base, free top. Verify base slab separately.</em>
    </div>
  `;
}
// Calculation logic
function verifyBeam() {
  const L = parseFloat(document.getElementById('span_v').value);
  const b = parseFloat(document.getElementById('b_v').value);
  const D = parseFloat(document.getElementById('D_v').value);
  const DL = parseFloat(document.getElementById('DL_v').value);
  const LL = parseFloat(document.getElementById('LL_v').value);
  const fck = parseFloat(document.getElementById('fck_v').value);
  const fy = parseFloat(document.getElementById('fy_v').value);
  const Ast_prov = parseFloat(document.getElementById('Ast_v').value);

  const d = D - 50;  // Effective depth (assuming 50mm cover + stirrups)
  const selfwt = b * D / 1e6 * 25;
  const wu = 1.5 * (DL + LL + selfwt);  // Factored load
  const Mu = wu * L * L / 8;  // Factored moment

  // Required Ast (simplified LSM)
  const Ast_req = (Mu * 1e6) / (0.87 * fy * 0.9 * d);

  // Basic checks
  const Mu_lim = 0.138 * fck * b * d * d / 1e6;  // Singly reinforced limit
  const defl_check = L * 1000 / d <= 20;  // Basic deflection (span/d <=20 for SS beam)
  const shearVu = wu * L / 2;
  const tau_v = shearVu * 1000 / (b * d);  // Nominal shear stress
  const tau_c_max = fck <= 20 ? 2.8 : (fck <= 25 ? 3.1 : 3.5);  // Max shear stress
  const shear_safe = tau_v <= tau_c_max;

  // Overall safe if Ast_prov >= Ast_req, Mu <= Mu_lim, deflection ok, shear ok
  const is_safe = Ast_prov >= Ast_req && Mu <= Mu_lim && defl_check && shear_safe;

  let result = `
    <div class="result ${is_safe ? '' : 'fail'}">
      <h3 style="text-align:center;color:${is_safe ? '#27ae60' : '#c0392b'};">${is_safe ? 'SAFE' : 'REVISE'}</h3>
      <strong>Factored Moment Mu: ${Mu.toFixed(1)} kNm</strong><br>
      <strong>Required Steel Ast: ${Ast_req.toFixed(0)} mm¬≤</strong><br>
      <strong>Provided Ast: ${Ast_prov} mm¬≤ (${Ast_prov >= Ast_req ? 'OK' : 'Insufficient'})</strong><br>
      <strong>Singly Reinforced Limit: ${Mu <= Mu_lim ? 'OK' : 'Exceeds ‚Äì Needs Doubly Reinforced'}</strong><br>
      <strong>Deflection Check (span/d): ${L*1000/d.toFixed(1)} ‚â§ 20? ${defl_check ? 'OK' : 'Fails'}</strong><br>
      <strong>Shear Stress: ${tau_v.toFixed(2)} MPa ‚â§ ${tau_c_max} MPa? ${shear_safe ? 'OK' : 'Fails ‚Äì Needs Stirrups Check'}</strong><br><br>
      <em>Note: This is a preliminary check. Always consult a qualified engineer for full verification.</em>
    </div>
  `;
  document.getElementById('verifier-result').innerHTML = result;
}

function showHome() {
  const username = document.getElementById('username').textContent;
  document.getElementById('content').innerHTML = `
    <div class="card" style="text-align:center;padding:80px 40px;background:#ffffff;border-radius:24px;box-shadow:0 20px 70px rgba(0,0,0,0.15);">
      <h2 style="font-size:42px;color:var(--d);margin-bottom:24px;font-weight:800;">
        Welcome, ${username}!
      </h2>
      <p style="font-size:22px;color:#555;max-width:800px;margin:0 auto 60px;line-height:1.6;">
        Choose your path: Design new structural elements or verify existing ones.
      </p>

  <div style="display:flex;justify-content:center;gap:40px;flex-wrap:wrap;margin-bottom:60px;">
  <!-- DESIGN DROPDOWN CARD -->
<div class="mode-card" 
     style="width:380px; cursor:pointer; transition:all 0.3s;"
     onclick="showDesignHub()">
  <i class="fas fa-calculator" style="font-size:100px; color:var(--primary); margin-bottom:25px;"></i>
  <h3 style="font-size:34px; color:var(--dark); margin-bottom:12px;">Design</h3>
  <p style="font-size:18px; color:#555;">
    RCC ‚Ä¢ Steel ‚Ä¢ Future modules
  </p>
</div>

  <!-- VERIFY CARD (unchanged) -->
  <div class="mode-card" style="width:360px;cursor:pointer;" onclick="showVerifyGrid()">
    <i class="fas fa-check-double" style="font-size:90px;color:var(--success);margin-bottom:20px;"></i>
    <h3 style="font-size:32px;color:var(--dark);">Verify</h3>
    <p style="font-size:18px;color:#666;margin-top:12px;">
      Check safety of existing beam, slab, column, footing, tank designs
    </p>
  </div>
</div>
  `;
}
// Toggle Design submenu on homepage
document.addEventListener('click', function(e) {
  const dropdown = document.getElementById('design-dropdown');
  const submenu = document.getElementById('design-submenu-home');

  if (dropdown && dropdown.contains(e.target)) {
    submenu.style.display = submenu.style.display === 'flex' ? 'none' : 'flex';
  } else if (submenu && !submenu.contains(e.target)) {
    submenu.style.display = 'none'; // close if clicking outside
  }
});

// New function to show Steel Design grid
function showSteelDesignGrid() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2 style="text-align:center;margin-bottom:30px;">Steel Design (IS 800:2007)</h2>
      <p style="text-align:center;font-size:18px;color:#555;margin-bottom:40px;">Select the steel member to design</p>
      <div class="mode-grid">
        <div class="mode-card" onclick="showSteelBeam()">
          <i class="fas fa-vector-square" style="font-size:70px;color:var(--primary);"></i>
          <h3>Beam Design</h3>
          <p>Laterally supported/restrained</p>
        </div>
        <div class="mode-card" onclick="showSteelColumn()">
          <i class="fas fa-columns" style="font-size:70px;color:var(--primary);"></i>
          <h3>Column Design</h3>
          <p>Axial compression & buckling</p>
        </div>
        <div class="mode-card" onclick="showSteelTension()">
          <i class="fas fa-link" style="font-size:70px;color:var(--primary);"></i>
          <h3>Tension Member</h3>
          <p>Net section & block shear</p>
        </div>
        <div class="mode-card" onclick="showSteelConnection()">
          <i class="fas fa-bolt" style="font-size:70px;color:var(--primary);"></i>
          <h3>Bolted Connection</h3>
          <p>Shear, bearing, tension</p>
        </div>
        <div class="mode-card" onclick="showSteelBasePlate()">
          <i class="fas fa-layer-group" style="font-size:70px;color:var(--primary);"></i>
          <h3>Base Plate</h3>
          <p>Axial load transfer</p>
        </div>
      </div>
      <button class="btn-calc" onclick="showHome()" style="margin-top:40px;width:auto;padding:14px 32px;">
        ‚Üê Back to Home
      </button>
    </div>
  `;
}

// New function: Show grid of all Design Calculators (like IS Codes country selection)
function showRccDesignGrid() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2 style="text-align:center;margin-bottom:30px;">Design Calculators</h2>
      <p style="text-align:center;font-size:18px;color:#555;margin-bottom:40px;">Select the structural element you want to design</p>
      <div class="mode-grid">
        <div class="mode-card" onclick="showOneWay()">
          <i class="fas fa-ruler-horizontal" style="font-size:70px;color:var(--p);"></i>
          <h3>One-Way Slab</h3>
          <p>Simply supported or continuous</p>
        </div>
        <div class="mode-card" onclick="showTwoWay()">
          <i class="fas fa-th" style="font-size:70px;color:var(--p);"></i>
          <h3>Two-Way Slab</h3>
          <p>Restrained corners</p>
        </div>
        <div class="mode-card" onclick="showBeam()">
          <i class="fas fa-vector-square" style="font-size:70px;color:var(--p);"></i>
          <h3>Beam</h3>
          <p>Singly/doubly reinforced</p>
        </div>
        <div class="mode-card" onclick="showColumn()">
          <i class="fas fa-columns" style="font-size:70px;color:var(--p);"></i>
          <h3>Column</h3>
          <p>Axial + uniaxial bending</p>
        </div>
        <div class="mode-card" onclick="showWaterTank()">
          <i class="fas fa-cube" style="font-size:70px;color:var(--p);"></i>
          <h3>Water Tank</h3>
          <p>Rectangular (IS 3370)</p>
        </div>
        <div class="mode-card" onclick="showStaircase()">
          <i class="fas fa-stairs" style="font-size:70px;color:var(--p);"></i>
          <h3>Staircase</h3>
          <p>Dog-legged with landing</p>
        </div>
        <div class="mode-card" onclick="showMixDesign()">
          <i class="fas fa-flask" style="font-size:70px;color:var(--p);"></i>
          <h3>Concrete Mix</h3>
          <p>M20 to M60 (IS 10262)</p>
        </div>
        <div class="mode-card" onclick="showCrack()">
          <i class="fas fa-hard-hat" style="font-size:70px;color:var(--p);"></i>
          <h3>Crack Width</h3>
          <p>Annex F calculation</p>
        </div>
        <div class="mode-card" onclick="showDevLength()">
          <i class="fas fa-link" style="font-size:70px;color:var(--p);"></i>
          <h3>Development Length</h3>
          <p>Tension/compression</p>
        </div>
      </div>
      <button class="btn-calc" onclick="showHome()" style="margin-top:40px;width:auto;padding:14px 32px;">
        ‚Üê Back to Home
      </button>
    </div>
  `;
}

// New function: Show grid of all Verifiers (similar style)
function showVerifyGrid() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2 style="text-align:center;margin-bottom:30px;">Design Verifiers</h2>
      <p style="text-align:center;font-size:18px;color:#555;margin-bottom:40px;">Verify safety of existing designs</p>
      <div class="mode-grid">
        <div class="mode-card" onclick="showVerifier()">
          <i class="fas fa-vector-square" style="font-size:70px;color:var(--g);"></i>
          <h3>Beam Verifier</h3>
          <p>Singly reinforced</p>
        </div>
        <div class="mode-card" onclick="showSlabVerifier()">
          <i class="fas fa-square" style="font-size:70px;color:var(--g);"></i>
          <h3>Slab Verifier</h3>
          <p>One-way or two-way</p>
        </div>
        <div class="mode-card" onclick="showColumnVerifier()">
          <i class="fas fa-columns" style="font-size:70px;color:var(--g);"></i>
          <h3>Column Verifier</h3>
          <p>Axial + uniaxial</p>
        </div>
        <div class="mode-card" onclick="showFootVerifier()">
          <i class="fas fa-layer-group" style="font-size:70px;color:var(--g);"></i>
          <h3>Footing Verifier</h3>
          <p>Isolated footing</p>
        </div>
        <div class="mode-card" onclick="showWaterTankVerifier()">
          <i class="fas fa-tint" style="font-size:70px;color:var(--g);"></i>
          <h3>Water Tank Verifier</h3>
          <p>Rectangular tank</p>
        </div>
      </div>
      <button class="btn-calc" onclick="showHome()" style="margin-top:40px;width:auto;padding:14px 32px;">
        ‚Üê Back to Home
      </button>
    </div>
  `;
}

// New function: Show grid of all Design Calculators (like IS Codes country selection)
function showSTEELDesignGrid() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2 style="text-align:center;margin-bottom:30px;">Design Calculators</h2>
      <p style="text-align:center;font-size:18px;color:#555;margin-bottom:40px;">Select the structural element you want to design</p>
      <div class="mode-grid">
        <div class="mode-card" onclick="showOneWay()">
          <i class="fas fa-ruler-horizontal" style="font-size:70px;color:var(--p);"></i>
          <h3>One-Way Slab</h3>
          <p>Simply supported or continuous</p>
        </div>
        <div class="mode-card" onclick="showTwoWay()">
          <i class="fas fa-th" style="font-size:70px;color:var(--p);"></i>
          <h3>Two-Way Slab</h3>
          <p>Restrained corners</p>
        </div>
        <div class="mode-card" onclick="showBeam()">
          <i class="fas fa-vector-square" style="font-size:70px;color:var(--p);"></i>
          <h3>Beam</h3>
          <p>Singly/doubly reinforced</p>
        </div>
        <div class="mode-card" onclick="showColumn()">
          <i class="fas fa-columns" style="font-size:70px;color:var(--p);"></i>
          <h3>Column</h3>
          <p>Axial + uniaxial bending</p>
        </div>
        <div class="mode-card" onclick="showWaterTank()">
          <i class="fas fa-cube" style="font-size:70px;color:var(--p);"></i>
          <h3>Water Tank</h3>
          <p>Rectangular (IS 3370)</p>
        </div>
        <div class="mode-card" onclick="showStaircase()">
          <i class="fas fa-stairs" style="font-size:70px;color:var(--p);"></i>
          <h3>Staircase</h3>
          <p>Dog-legged with landing</p>
        </div>
        <div class="mode-card" onclick="showMixDesign()">
          <i class="fas fa-flask" style="font-size:70px;color:var(--p);"></i>
          <h3>Concrete Mix</h3>
          <p>M20 to M60 (IS 10262)</p>
        </div>
        <div class="mode-card" onclick="showCrack()">
          <i class="fas fa-hard-hat" style="font-size:70px;color:var(--p);"></i>
          <h3>Crack Width</h3>
          <p>Annex F calculation</p>
        </div>
        <div class="mode-card" onclick="showDevLength()">
          <i class="fas fa-link" style="font-size:70px;color:var(--p);"></i>
          <h3>Development Length</h3>
          <p>Tension/compression</p>
        </div>
      </div>
      <button class="btn-calc" onclick="showHome()" style="margin-top:40px;width:auto;padding:14px 32px;">
        ‚Üê Back to Home
      </button>
    </div>
  `;
}

// New function: Show grid of all Verifiers (similar style)
function showVerifyGrid() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2 style="text-align:center;margin-bottom:30px;">Design Verifiers</h2>
      <p style="text-align:center;font-size:18px;color:#555;margin-bottom:40px;">Verify safety of existing designs</p>
      <div class="mode-grid">
        <div class="mode-card" onclick="showVerifier()">
          <i class="fas fa-vector-square" style="font-size:70px;color:var(--g);"></i>
          <h3>Beam Verifier</h3>
          <p>Singly reinforced</p>
        </div>
        <div class="mode-card" onclick="showSlabVerifier()">
          <i class="fas fa-square" style="font-size:70px;color:var(--g);"></i>
          <h3>Slab Verifier</h3>
          <p>One-way or two-way</p>
        </div>
        <div class="mode-card" onclick="showColumnVerifier()">
          <i class="fas fa-columns" style="font-size:70px;color:var(--g);"></i>
          <h3>Column Verifier</h3>
          <p>Axial + uniaxial</p>
        </div>
        <div class="mode-card" onclick="showFootVerifier()">
          <i class="fas fa-layer-group" style="font-size:70px;color:var(--g);"></i>
          <h3>Footing Verifier</h3>
          <p>Isolated footing</p>
        </div>
        <div class="mode-card" onclick="showWaterTankVerifier()">
          <i class="fas fa-tint" style="font-size:70px;color:var(--g);"></i>
          <h3>Water Tank Verifier</h3>
          <p>Rectangular tank</p>
        </div>
      </div>
      <button class="btn-calc" onclick="showHome()" style="margin-top:40px;width:auto;padding:14px 32px;">
        ‚Üê Back to Home
      </button>
    </div>
  `;
}
    // ==================== PRACTICAL TOOLS SECTION (BULLETPROOF v2) ====================

// ==================== PRACTICAL TOOLS SECTION (COMPLETE & FINAL) ====================

// 1. Unit Converter (THE ORIGINAL KING)
function showUnitConverter() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Unit Converter</h2>
      <p style="margin-bottom:30px;color:var(--text-muted);">Essential daily conversions for civil engineers</p>

      <div class="mode-grid">
        <!-- Force -->
        <div class="mode-card">
          <h3><i class="fas fa-weight-hanging"></i> Force</h3>
          <label>Value</label><input type="number" id="force-val" value="100" step="any">
          <label>From</label>
          <select id="force-from">
            <option value="kN" selected>kN</option>
            <option value="N">N</option>
            <option value="kg">kg force</option>
            <option value="tonne">tonne force</option>
          </select>
          <label>To</label>
          <select id="force-to">
            <option value="N">N</option>
            <option value="kN">kN</option>
            <option value="kg">kg force</option>
            <option value="tonne">tonne force</option>
          </select>
          <button class="btn-calc" onclick="convertForce()">Convert</button>
          <div id="force-result" class="result" style="display:none;margin-top:20px;"></div>
        </div>

        <!-- Pressure/Stress -->
        <div class="mode-card">
          <h3><i class="fas fa-compress-arrows-alt"></i> Pressure / Stress</h3>
          <label>Value</label><input type="number" id="press-val" value="25" step="any">
          <label>From</label>
          <select id="press-from">
            <option value="MPa" selected>MPa</option>
            <option value="N/mm¬≤">N/mm¬≤</option>
            <option value="kg/cm¬≤">kg/cm¬≤</option>
            <option value="kN/m¬≤">kN/m¬≤</option>
          </select>
          <label>To</label>
          <select id="press-to">
            <option value="N/mm¬≤">N/mm¬≤</option>
            <option value="MPa">MPa</option>
            <option value="kg/cm¬≤">kg/cm¬≤</option>
            <option value="kN/m¬≤">kN/m¬≤</option>
          </select>
          <button class="btn-calc" onclick="convertPressure()">Convert</button>
          <div id="press-result" class="result" style="display:none;margin-top:20px;"></div>
        </div>

        <!-- Moment -->
        <div class="mode-card">
          <h3><i class="fas fa-sync-alt"></i> Moment</h3>
          <label>Value</label><input type="number" id="moment-val" value="100" step="any">
          <label>From</label>
          <select id="moment-from">
            <option value="kNm" selected>kN-m</option>
            <option value="Nm">N-m</option>
            <option value="Nmm">N-mm</option>
          </select>
          <label>To</label>
          <select id="moment-to">
            <option value="Nmm">N-mm</option>
            <option value="Nm">N-m</option>
            <option value="kNm">kN-m</option>
          </select>
          <button class="btn-calc" onclick="convertMoment()">Convert</button>
          <div id="moment-result" class="result" style="display:none;margin-top:20px;"></div>
        </div>

        <!-- Steel Weight -->
        <div class="mode-card">
          <h3><i class="fas fa-grip-lines-vertical"></i> Steel Weight</h3>
          <label>Diameter (mm)</label>
          <select id="steel-dia">
            <option>8</option><option>10</option><option>12</option><option>16</option>
            <option selected>20</option><option>25</option><option>32</option>
          </select>
          <label>Length (m)</label><input type="number" id="steel-length" value="12" step="any">
          <button class="btn-calc" onclick="calcSteelWeight()">Calculate</button>
          <div id="steel-result" class="result" style="display:none;margin-top:20px;"></div>
        </div>

        <!-- Cement Bags -->
        <div class="mode-card">
          <h3><i class="fas fa-cubes"></i> Cement Bags</h3>
          <label>Volume (m¬≥)</label><input type="number" id="cement-vol" value="10" step="any">
          <label>Cement (kg/m¬≥)</label><input type="number" id="cement-kg" value="350" step="any">
          <button class="btn-calc" onclick="calcCementBags()">Calculate</button>
          <div id="cement-result" class="result" style="display:none;margin-top:20px;"></div>
        </div>
      </div>
    </div>
  `;
}

function convertForce() {
  const el = (id) => document.getElementById(id);
  if (!el('force-val') || !el('force-from') || !el('force-to')) return;
  const val = parseFloat(el('force-val').value) || 0;
  const from = el('force-from').value;
  const to = el('force-to').value;
  const conv = { kN: 1000, N: 1, kg: 9.81, tonne: 9810 };
  const result = val * conv[from] / conv[to];
  el('force-result').innerHTML = `<strong>Result: ${result.toFixed(3)} ${to}</strong>`;
  el('force-result').style.display = 'block';
}

function convertPressure() {
  const el = (id) => document.getElementById(id);
  if (!el('press-val') || !el('press-from') || !el('press-to')) return;
  const val = parseFloat(el('press-val').value) || 0;
  const from = el('press-from').value;
  const to = el('press-to').value;
  const conv = { MPa: 1, 'N/mm¬≤': 1, 'kg/cm¬≤': 0.0981, 'kN/m¬≤': 0.001 };
  const result = val * conv[from] / conv[to];
  el('press-result').innerHTML = `<strong>Result: ${result.toFixed(4)} ${to}</strong>`;
  el('press-result').style.display = 'block';
}

function convertMoment() {
  const el = (id) => document.getElementById(id);
  if (!el('moment-val') || !el('moment-from') || !el('moment-to')) return;
  const val = parseFloat(el('moment-val').value) || 0;
  const from = el('moment-from').value;
  const to = el('moment-to').value;
  const conv = { kNm: 1e6, Nm: 1000, Nmm: 1 };
  const result = val * conv[from] / conv[to];
  el('moment-result').innerHTML = `<strong>Result: ${result.toFixed(2)} ${to}</strong>`;
  el('moment-result').style.display = 'block';
}

function calcSteelWeight() {
  const el = (id) => document.getElementById(id);
  if (!el('steel-dia') || !el('steel-length')) return;
  const dia = parseFloat(el('steel-dia').value);
  const length = parseFloat(el('steel-length').value) || 0;
  const weightPerM = dia * dia * 0.006165;
  const total = weightPerM * length;
  el('steel-result').innerHTML = `<strong>Total Weight: ${total.toFixed(2)} kg</strong><br><small>${weightPerM.toFixed(3)} kg/m √ó ${length} m</small>`;
  el('steel-result').style.display = 'block';
}

function calcCementBags() {
  const el = (id) => document.getElementById(id);
  if (!el('cement-vol') || !el('cement-kg')) return;
  const vol = parseFloat(el('cement-vol').value) || 0;
  const kg = parseFloat(el('cement-kg').value) || 0;
  const totalKg = vol * kg;
  const bags = Math.ceil(totalKg / 50);
  el('cement-result').innerHTML = `<strong>Total Cement: ${totalKg.toFixed(0)} kg</strong><br><strong>Bags (50kg): ${bags}</strong>`;
  el('cement-result').style.display = 'block';
}

// [The rest of the tools ‚Äî Thumb Rules, BBS, Load Estimator, SBC ‚Äî from the previous message remain exactly the same]
    // 2. Thumb Rules Calculator
function showThumbRules() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Thumb Rules ‚Äì Quick Preliminary Sizing (IS 456)</h2>
      <p style="margin-bottom:30px;color:var(--text-muted);">Fast estimates for initial design</p>

      <div class="mode-grid">
        <div class="mode-card">
          <h3>Slab Thickness</h3>
          <label>Span (m)</label><input type="number" id="tr-span" value="5.0" step="0.1">
          <label>Type</label>
          <select id="tr-type">
            <option value="one">One-Way</option>
            <option value="two" selected>Two-Way</option>
          </select>
          <button class="btn-calc" onclick="calcThumbSlab()">Calculate</button>
          <div id="tr-slab" class="result" style="display:none;margin-top:20px;"></div>
        </div>

        <div class="mode-card">
          <h3>Beam Depth</h3>
          <label>Span (m)</label><input type="number" id="tr-beam-span" value="6.0" step="0.1">
          <button class="btn-calc" onclick="calcThumbBeam()">Calculate</button>
          <div id="tr-beam" class="result" style="display:none;margin-top:20px;"></div>
        </div>

        <div class="mode-card">
          <h3>Isolated Footing</h3>
          <label>Axial Load (kN)</label><input type="number" id="tr-load" value="1200">
          <label>SBC (kN/m¬≤)</label><input type="number" id="tr-sbc" value="150">
          <button class="btn-calc" onclick="calcThumbFooting()">Calculate</button>
          <div id="tr-foot" class="result" style="display:none;margin-top:20px;"></div>
        </div>
      </div>
    </div>
  `;
}

function calcThumbSlab() {
  const spanEl = document.getElementById('tr-span');
  const typeEl = document.getElementById('tr-type');
  const resultEl = document.getElementById('tr-slab');
  if (!spanEl || !typeEl || !resultEl) return;

  const span = parseFloat(spanEl.value) || 0;
  const type = typeEl.value;
  const ratio = type === 'one' ? 25 : 32;
  const thick = Math.ceil(span * 1000 / ratio / 5) * 5;

  resultEl.innerHTML = `<strong>Suggested Thickness: ${thick} mm</strong><br><small>Span/${ratio} rule (approx)</small>`;
  resultEl.style.display = 'block';
}

function calcThumbBeam() {
  const spanEl = document.getElementById('tr-beam-span');
  const resultEl = document.getElementById('tr-beam');
  if (!spanEl || !resultEl) return;

  const span = parseFloat(spanEl.value) || 0;
  const depth = Math.ceil(span * 1000 / 12 / 25) * 25;

  resultEl.innerHTML = `<strong>Suggested Depth: ${depth}‚Äì${depth + 100} mm</strong><br><small>Span/12 to Span/15 rule</small>`;
  resultEl.style.display = 'block';
}

function calcThumbFooting() {
  const loadEl = document.getElementById('tr-load');
  const sbcEl = document.getElementById('tr-sbc');
  const resultEl = document.getElementById('tr-foot');
  if (!loadEl || !sbcEl || !resultEl) return;

  const load = parseFloat(loadEl.value) || 0;
  const sbc = parseFloat(sbcEl.value) || 1;
  const area = load / sbc;
  const side = Math.ceil(Math.sqrt(area) * 10) / 10;

  resultEl.innerHTML = `<strong>Suggested Size: ${side.toFixed(1)} √ó ${side.toFixed(1)} m</strong><br><small>Required area: ${area.toFixed(2)} m¬≤</small>`;
  resultEl.style.display = 'block';
}

// 3. Bar Bending Schedule Helper
function showBBS() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Bar Bending Schedule Helper</h2>
      <p style="margin-bottom:20px;color:var(--text-muted);">Quick cutting length & weight calculator</p>

      <label>Bar Diameter (mm)</label>
      <select id="bbs-dia">
        <option>8</option><option>10</option><option>12</option><option>16</option>
        <option selected>20</option><option>25</option><option>32</option>
      </select>

      <label>Clear Length (m)</label><input type="number" id="bbs-length" value="5.0" step="0.1">

      <label>Number of Bars</label><input type="number" id="bbs-count" value="6">

      <label>Include 90¬∞ Hooks?</label><input type="checkbox" id="bbs-hook">

      <label>Include Lap (50œÜ)?</label><input type="checkbox" id="bbs-lap">

      <button class="btn-calc" onclick="calcBBS()">Calculate</button>

      <div id="bbs-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcBBS() {
  const diaEl = document.getElementById('bbs-dia');
  const lenEl = document.getElementById('bbs-length');
  const countEl = document.getElementById('bbs-count');
  const hookEl = document.getElementById('bbs-hook');
  const lapEl = document.getElementById('bbs-lap');
  const resultEl = document.getElementById('bbs-result');
  if (!diaEl || !lenEl || !countEl || !resultEl) return;

  const dia = parseFloat(diaEl.value);
  const length = parseFloat(lenEl.value) || 0;
  const count = parseFloat(countEl.value) || 1;
  const hook = hookEl.checked ? 0.24 * dia : 0; // approx 12d hook
  const lap = lapEl.checked ? 50 * dia / 1000 : 0;

  const cutLength = length + 0.1 + 2 * hook + lap;
  const totalLength = cutLength * count;
  const weight = totalLength * (dia * dia * 0.006165);

  resultEl.innerHTML = `
    <strong>Cutting Length per bar: ${cutLength.toFixed(2)} m</strong><br>
    <strong>Total Length: ${totalLength.toFixed(2)} m</strong><br>
    <strong>Total Weight: ${weight.toFixed(1)} kg</strong>
  `;
  resultEl.style.display = 'block';
}

// 4. Load Estimator
function showLoadCalc() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Quick Load Estimator (IS 875 Part 2)</h2>
      <label>Building Type</label>
      <select id="load-type">
        <option value="2">Residential (2 kN/m¬≤)</option>
        <option value="3">Office (3 kN/m¬≤)</option>
        <option value="4" selected>General (4 kN/m¬≤)</option>
        <option value="5">Staircase (5 kN/m¬≤)</option>
      </select>

      <label>Floor Area (m¬≤)</label><input type="number" id="load-area" value="200">

      <label>Slab Thickness (mm)</label><input type="number" id="load-thick" value="150">

      <label>Floor Finish (kN/m¬≤)</label><input type="number" id="load-ff" value="1.0">

      <button class="btn-calc" onclick="calcLoad()">Calculate</button>

      <div id="load-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcLoad() {
  const typeEl = document.getElementById('load-type');
  const areaEl = document.getElementById('load-area');
  const thickEl = document.getElementById('load-thick');
  const ffEl = document.getElementById('load-ff');
  const resultEl = document.getElementById('load-result');
  if (!typeEl || !areaEl || !thickEl || !ffEl || !resultEl) return;

  const ll = parseFloat(typeEl.value);
  const area = parseFloat(areaEl.value) || 0;
  const thick = parseFloat(thickEl.value) / 1000 || 0.15;
  const ff = parseFloat(ffEl.value) || 0;

  const slabWt = 25 * thick;
  const totalDL = slabWt + ff;
  const totalFactored = 1.5 * (totalDL + ll) * area;

  resultEl.innerHTML = `
    <strong>Live Load: ${ll} kN/m¬≤</strong><br>
    <strong>Dead Load: ${totalDL.toFixed(2)} kN/m¬≤</strong><br>
    <strong>Total Factored Load: ${totalFactored.toFixed(0)} kN</strong>
  `;
  resultEl.style.display = 'block';
}

// 5. Soil SBC Guide
function showSBC() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Soil Safe Bearing Capacity Guide</h2>
      <p style="margin-bottom:20px;color:var(--text-muted);">Approximate values for preliminary design</p>

      <label>Soil Type</label>
      <select id="sbc-soil">
        <option value="3300">Hard Rock</option>
        <option value="1000">Soft Rock</option>
        <option value="600">Dense Gravel/Sand</option>
        <option value="400">Medium Sand</option>
        <option value="450">Hard Clay</option>
        <option value="250">Medium Clay</option>
        <option value="100" selected>Soft Clay</option>
        <option value="150">Black Cotton Soil</option>
        <option value="50">Loose Fill</option>
      </select>

      <button class="btn-calc" onclick="showSBCResult()">Show SBC</button>
      <div id="sbc-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function showSBCResult() {
  const soilEl = document.getElementById('sbc-soil');
  const resultEl = document.getElementById('sbc-result');
  if (!soilEl || !resultEl) return;

  const sbc = soilEl.value;
  resultEl.innerHTML = `
    <strong>Safe Bearing Capacity: ${sbc} kN/m¬≤</strong><br>
    <small>Approximate ‚Äî always verify with soil test report</small>
  `;
  resultEl.style.display = 'block';
}
// ==================== SOIL TOOLS ====================

// 1. Bearing Capacity (Terzaghi)
function showBearingCapacity() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Ultimate Bearing Capacity (Terzaghi)</h2>
      <p style="margin-bottom:20px;color:var(--text-muted);">For strip footing (cohesionless & cohesive)</p>

      <label>Cohesion c (kN/m¬≤)</label><input type="number" id="bc-c" value="0">
      <label>Unit Weight Œ≥ (kN/m¬≥)</label><input type="number" id="bc-gamma" value="18">
      <label>Angle of Friction œÜ (¬∞)</label><input type="number" id="bc-phi" value="30">
      <label>Footing Depth Df (m)</label><input type="number" id="bc-df" value="1.5">
      <label>Footing Width B (m)</label><input type="number" id="bc-b" value="2">

      <button class="btn-calc" onclick="calcBearingCapacity()">Calculate qu</button>
      <div id="bc-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcBearingCapacity() {
  const c = parseFloat(document.getElementById('bc-c').value) || 0;
  const gamma = parseFloat(document.getElementById('bc-gamma').value) || 0;
  const phi = parseFloat(document.getElementById('bc-phi').value) || 0;
  const Df = parseFloat(document.getElementById('bc-df').value) || 0;
  const B = parseFloat(document.getElementById('bc-b').value) || 1;

  const phiRad = phi * Math.PI / 180;
  const Nq = Math.exp(Math.PI * Math.tan(phiRad)) * Math.pow((Math.cos(phiRad) + Math.sin(phiRad)) / (Math.cos(phiRad) - Math.sin(phiRad)), 2) / (2 * Math.pow(Math.cos(phiRad), 2));
  const Nc = (Nq - 1) * Math.cos(phiRad) / Math.sin(phiRad);
  const Ng = 2 * (Nq + 1) * Math.tan(phiRad);

  const qu = c * Nc + gamma * Df * (Nq - 1) + 0.5 * gamma * B * Ng;
  const safe = qu / 3; // FOS 3

  document.getElementById('bc-result').innerHTML = `
    <strong>Ultimate Bearing Capacity qu = ${qu.toFixed(1)} kN/m¬≤</strong><br>
    <strong>Safe Bearing Capacity (FOS 3) = ${safe.toFixed(1)} kN/m¬≤</strong>
  `;
  document.getElementById('bc-result').style.display = 'block';
}

// 2. Immediate Settlement
function showSettlement() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Immediate Settlement Estimate</h2>
      <label>Soil Type</label>
      <select id="sett-type">
        <option value="cohesive">Cohesive (Clay)</option>
        <option value="granular">Granular (Sand)</option>
      </select>
      <label>Applied Pressure q (kN/m¬≤)</label><input type="number" id="sett-q" value="150">
      <label>Footing Width B (m)</label><input type="number" id="sett-b" value="2">
      <label>Modulus Es (MPa)</label><input type="number" id="sett-es" value="15">

      <button class="btn-calc" onclick="calcSettlement()">Calculate</button>
      <div id="sett-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcSettlement() {
  const type = document.getElementById('sett-type').value;
  const q = parseFloat(document.getElementById('sett-q').value);
  const B = parseFloat(document.getElementById('sett-b').value);
  const Es = parseFloat(document.getElementById('sett-es').value) * 1000; // to kPa

  let If = type === 'cohesive' ? 0.9 : 1.0;
  const mu = type === 'cohesive' ? 0.5 : 0.3;
  const s = (q * B * (1 - mu * mu)) / Es * If;

  document.getElementById('sett-result').innerHTML = `
    <strong>Immediate Settlement ‚âà ${s.toFixed(1)} mm</strong><br>
    <small>For square footing at surface</small>
  `;
  document.getElementById('sett-result').style.display = 'block';
}

// 3. Earth Pressure (Rankine)
function showEarthPressure() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Earth Pressure (Rankine Theory)</h2>
      <label>Unit Weight Œ≥ (kN/m¬≥)</label><input type="number" id="ep-gamma" value="18">
      <label>Angle of Friction œÜ (¬∞)</label><input type="number" id="ep-phi" value="30">
      <label>Wall Height H (m)</label><input type="number" id="ep-h" value="5">
      <label>Cohesion c (kN/m¬≤)</label><input type="number" id="ep-c" value="0">

      <button class="btn-calc" onclick="calcEarthPressure()">Calculate</button>
      <div id="ep-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcEarthPressure() {
  const gamma = parseFloat(document.getElementById('ep-gamma').value);
  const phi = parseFloat(document.getElementById('ep-phi').value);
  const H = parseFloat(document.getElementById('ep-h').value);
  const c = parseFloat(document.getElementById('ep-c').value);

  const phiRad = phi * Math.PI / 180;
  const Ka = Math.pow((Math.cos(phiRad) - Math.sqrt(Math.pow(Math.cos(phiRad),2) - Math.pow(Math.cos(phiRad + Math.PI/2),2))) / (Math.cos(phiRad) + Math.sqrt(Math.pow(Math.cos(phiRad),2) - Math.pow(Math.cos(phiRad + Math.PI/2),2))), 2);
  const Kp = 1 / Ka;

  const pa = Ka * gamma * H - 2 * c * Math.sqrt(Ka);
  const pp = Kp * gamma * H + 2 * c * Math.sqrt(Kp);

  document.getElementById('ep-result').innerHTML = `
    <strong>Active Pressure (Ka): ${Ka.toFixed(3)}</strong><br>
    <strong>Passive Pressure (Kp): ${Kp.toFixed(3)}</strong><br>
    <strong>Active Force at base: ${Math.max(0, pa * H / 2).toFixed(1)} kN/m</strong><br>
    <strong>Passive Force at base: ${(pp * H / 2).toFixed(1)} kN/m</strong>
  `;
  document.getElementById('ep-result').style.display = 'block';
}

// 4. Pile Capacity (Static)
function showPileCapacity() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Pile Capacity Estimate</h2>
      <label>Pile Diameter (m)</label><input type="number" id="pile-d" value="0.6">
      <label>Pile Length (m)</label><input type="number" id="pile-l" value="15">
      <label>End Bearing qu (kN/m¬≤)</label><input type="number" id="pile-qu" value="5000">
      <label>Skin Friction fs (kN/m¬≤)</label><input type="number" id="pile-fs" value="50">
      <label>FOS</label><input type="number" id="pile-fos" value="2.5">

      <button class="btn-calc" onclick="calcPile()">Calculate</button>
      <div id="pile-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcPile() {
  const d = parseFloat(document.getElementById('pile-d').value);
  const L = parseFloat(document.getElementById('pile-l').value);
  const qu = parseFloat(document.getElementById('pile-qu').value);
  const fs = parseFloat(document.getElementById('pile-fs').value);
  const fos = parseFloat(document.getElementById('pile-fos').value);

  const end = qu * Math.PI * d * d / 4;
  const skin = fs * Math.PI * d * L;
  const total = end + skin;
  const safe = total / fos;

  document.getElementById('pile-result').innerHTML = `
    <strong>End Bearing: ${end.toFixed(0)} kN</strong><br>
    <strong>Skin Friction: ${skin.toFixed(0)} kN</strong><br>
    <strong>Ultimate Capacity: ${total.toFixed(0)} kN</strong><br>
    <strong>Safe Capacity (FOS ${fos}): ${safe.toFixed(0)} kN</strong>
  `;
  document.getElementById('pile-result').style.display = 'block';
}

// 5. Soil Unit Weight
function showSoilWeight() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Soil Unit Weight Calculator</h2>
      <label>Bulk Unit Weight Œ≥ (kN/m¬≥)</label><input type="number" id="sw-gamma" value="18">
      <label>Water Content w (%)</label><input type="number" id="sw-w" value="20">
      <label>Void Ratio e</label><input type="number" id="sw-e" value="0.8">

      <button class="btn-calc" onclick="calcSoilWeight()">Calculate</button>
      <div id="sw-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcSoilWeight() {
  const gamma = parseFloat(document.getElementById('sw-gamma').value);
  const w = parseFloat(document.getElementById('sw-w').value) / 100;
  const e = parseFloat(document.getElementById('sw-e').value);

  const gamma_d = gamma / (1 + w);
  const gamma_sat = gamma_d * (1 + e) + 9.81 * e;
  const gamma_sub = gamma_sat - 9.81;

  document.getElementById('sw-result').innerHTML = `
    <strong>Dry Unit Weight Œ≥d = ${gamma_d.toFixed(2)} kN/m¬≥</strong><br>
    <strong>Saturated Œ≥sat = ${gamma_sat.toFixed(2)} kN/m¬≥</strong><br>
    <strong>Submerged Œ≥' = ${gamma_sub.toFixed(2)} kN/m¬≥</strong>
  `;
  document.getElementById('sw-result').style.display = 'block';
}

    function showDisclaimer() {
      document.getElementById('content').innerHTML = document.getElementById('disclaimer-template').innerHTML;
    }

    // ==================== ONE-WAY SLAB ====================
    function showOneWay() {
      document.getElementById('content').innerHTML = document.getElementById('oneway-template').innerHTML;
      oneWayDesign();
    }
    function showMixDesign() {
  document.getElementById('content').innerHTML = document.getElementById('mixdesign-template').innerHTML;
  mixDesignPro();
}


function mixDesignPro() {
  document.getElementById('mix-section').innerHTML = `
    <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">Concrete Mix Design (IS 10262:2019)</h3>
    <label>Target Grade</label>
    <select id="grade">
      <option value="20">M20</option>
      <option value="25" selected>M25</option>
      <option value="30">M30</option>
      <option value="35">M35</option>
      <option value="40">M40</option>
      <option value="45">M45</option>
      <option value="50">M50</option>
      <option value="60">M60</option>
    </select>

    <label>Exposure Condition (IS 456 Table 5)</label>
    <select id="exposure">
      <option value="Mild">Mild</option>
      <option value="Moderate" selected>Moderate</option>
      <option value="Severe">Severe</option>
      <option value="Very Severe">Very Severe</option>
      <option value="Extreme">Extreme</option>
    </select>

    <label>Max Aggregate Size (mm)</label>
    <select id="agg">
      <option value="10">10 mm</option>
      <option value="20" selected>20 mm</option>
      <option value="40">40 mm</option>
    </select>

    <label>Aggregate Type</label>
    <select id="aggtype">
      <option value="angular" selected>Angular (Crushed)</option>
      <option value="subangular">Sub-angular</option>
      <option value="gravel">Gravel (Rounded)</option>
    </select>

    <label>Workability (Slump mm)</label>
    <input type="number" id="slump" value="100" min="25" max="200">

    <label>Admixture Type</label>
    <select id="admix">
      <option value="none" selected>No Admixture</option>
      <option value="superplasticizer">Chemical Superplasticizer (20-30% water reduction)</option>
      <option value="flyash">Fly Ash (10-20% cement replacement)</option>
      <option value="silicafume">Silica Fume (5-10% cement replacement)</option>
      <option value="ggbs">GGBS (20-50% cement replacement)</option>
      <option value="natural">Natural (Rice Husk Ash / Bagasse Ash - 10-15% replacement)</option>
    </select>

    <button class="btn-calc" onclick="calculateMix()">Design Mix</button>
  `;
}

function calculateMix() {
  const grade = parseFloat(document.getElementById('grade').value);
  const exposure = document.getElementById('exposure').value;
  const aggSize = parseFloat(document.getElementById('agg').value);
  const aggType = document.getElementById('aggtype').value;
  const slump = parseFloat(document.getElementById('slump').value);
  const admix = document.getElementById('admix').value;

  // 1. Target mean strength
  const sigma = (grade <= 20) ? 3.5 : (grade <= 35) ? 4.0 : 5.0;
  const fTarget = grade + 1.65 * sigma;

  // 2. Max w/c & min cement (IS 456 Table 5)
  const exposureData = {
    Mild: {wc: 0.55, cement: 300},
    Moderate: {wc: 0.50, cement: 300},
    Severe: {wc: 0.45, cement: 320},
    "Very Severe": {wc: 0.45, cement: 340},
    Extreme: {wc: 0.40, cement: 360}
  };
  const {wc: maxWc, cement: minCement} = exposureData[exposure];

  // 3. Base water content (Table 2 IS 10262, 20mm, 50mm slump)
  let water = 186;
  if (aggSize === 10) water += 20;
  if (aggSize === 40) water -= 10;
  water += (slump - 50) * 3 / 25; // slump adjustment

  // 4. Admixture adjustments
  let cementReplacement = 0; // % of cement replaced
  let waterReduction = 0;    // % reduction

  switch (admix) {
    case "superplasticizer":
      waterReduction = 25; // 20-30%, take 25% average
      break;
    case "flyash":
      cementReplacement = 20; // typical 15-25%
      waterReduction = 10;
      break;
    case "silicafume":
      cementReplacement = 8; // 5-10%
      waterReduction = 15;
      break;
    case "ggbs":
      cementReplacement = 40; // 20-50%
      waterReduction = 5;
      break;
    case "natural":
      cementReplacement = 12; // 10-15%
      waterReduction = 8;
      break;
    default:
      // no admixture
      break;
  }

  // Apply water reduction
  water *= (1 - waterReduction / 100);

  // 5. w/c ratio (approximate from strength, limited by exposure)
  let wc = 0.60 - (grade - 20) * 0.005;
  wc = Math.min(wc, maxWc);

  // 6. Cement content (after replacement)
  let cement = Math.max(minCement, water / wc);
  cement = Math.ceil(cement / 10) * 10;
  const cementOriginal = cement;
  cement *= (1 - cementReplacement / 100); // reduce if replaced
  cement = Math.round(cement / 10) * 10;

  // 7. Final water
  water = cement * wc;

  // 8. Aggregate volume (1 m¬≥)
  const airContent = (aggSize === 10) ? 0.03 : (aggSize === 20) ? 0.02 : 0.01;
  const volCement = cement / (3.15 * 1000);
  const volWater = water / 1000;
  const volAggregate = 1 - volCement - volWater - airContent;

  // 9. Fine aggregate ratio (Table 3, adjust slightly for admixture)
  let faRatio = (aggSize === 10) ? 0.40 : (aggSize === 20) ? 0.35 : 0.30;
  if (aggType === "gravel") faRatio += 0.05;
  if (wc < 0.50) faRatio += (0.50 - wc) * 0.10;
  if (admix !== "none") faRatio += 0.03; // admixtures improve workability ‚Üí slightly more sand

  // 10. Quantities
  const sgFA = 2.65;
  const sgCA = 2.70;
  const fa = volAggregate * faRatio * sgFA * 1000;
  const ca = volAggregate * (1 - faRatio) * sgCA * 1000;

  // 11. Final ratio
  const ratioC = 1;
  const ratioFA = (fa / cement).toFixed(2);
  const ratioCA = (ca / cement).toFixed(2);

  // Admixture note
  let admixNote = "None";
  if (admix === "superplasticizer") admixNote = "Chemical Superplasticizer (25% water reduction)";
  else if (admix === "flyash") admixNote = `Fly Ash (${cementReplacement}% cement replacement)`;
  else if (admix === "silicafume") admixNote = `Silica Fume (${cementReplacement}% replacement)`;
  else if (admix === "ggbs") admixNote = `GGBS (${cementReplacement}% replacement)`;
  else if (admix === "natural") admixNote = `Natural Admixture (Rice Husk / Bagasse Ash - ${cementReplacement}% replacement)`;

  document.getElementById('mix-result').innerHTML = `
    <div class="result">
      <h3 style="color:#27ae60">CONCRETE MIX DESIGN - M${grade} (IS 10262:2019)</h3>
      <strong>Target Mean Strength:</strong> ${fTarget.toFixed(1)} MPa<br>
      <strong>Exposure:</strong> ${exposure} ‚Üí Max w/c = ${maxWc}, Min Cement = ${minCement} kg/m¬≥<br>
      <strong>Water / Cement Ratio:</strong> ${wc.toFixed(2)}<br>
      <strong>Cement (effective):</strong> <big>${Math.round(cement)} kg/m¬≥</big> (original ${cementOriginal} kg)<br>
      <strong>Water:</strong> ${Math.round(water)} kg/m¬≥<br>
      <strong>Fine Aggregate (Sand):</strong> ${Math.round(fa)} kg/m¬≥<br>
      <strong>Coarse Aggregate:</strong> ${Math.round(ca)} kg/m¬≥<br>
      <strong>Mix Ratio (by weight):</strong> 1 : ${ratioFA} : ${ratioCA} (C : FA : CA)<br>
      <strong>Admixture:</strong> ${admixNote}<br>
      <em>Note: Final proportions should be verified by lab trials. Fly Ash/Silica/GGBS replace part of cement.</em>
    </div>
  `;
}

    function oneWayDesign() {
      document.getElementById('oneway-section').innerHTML = `
        <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">One-Way Slab Design (IS 456:2000)</h3>
        <label>Span Lx (m)</label><input type="number" id="Lx" value="4.0" step="0.1">
        <label>Live Load (kN/m¬≤)</label><input type="number" id="LL" value="3.0">
        <label>Floor Finish (kN/m¬≤)</label><input type="number" id="FF" value="1.0">
        <label>Concrete Grade</label><select id="fck"><option value="20">M20</option><option value="25" selected>M25</option><option value="30">M30</option></select>
        <label>Steel Grade</label><select id="fy"><option value="415">Fe415</option><option value="500" selected>Fe500</option></select>
        <label>Support</label><select id="support"><option value="simple">Simply Supported</option><option value="continuous" selected>Continuous</option></select>
        <button class="btn-calc" onclick="calculateOneWay()">Design Slab</button>
      `;
    }

    function calculateOneWay() {
  const Lx = parseFloat(document.getElementById('Lx').value);
  const LL = parseFloat(document.getElementById('LL').value);
  const FF = parseFloat(document.getElementById('FF').value);
  const fck = parseFloat(document.getElementById('fck').value);
  const fy = parseFloat(document.getElementById('fy').value);
  const isContinuous = document.getElementById('support').value === "continuous";

  // Moment coefficients (IS 456 Table 12 approximate for slabs)
  const posCoeff = isContinuous ? 1/12 : 1/8;
  const negCoeff = isContinuous ? 1/10 : 0;

  // Basic span/d ratio (Cl. 23.2.1) + modification (approx pt=0.5%)
  let basicRatio = isContinuous ? 26 : 20;
  const modFs = 0.58 * fy * 0.5 / 230; // Assume pt ‚âà 0.5%
  const modRatio = Math.min(2, 0.8 + modFs); // Cl. 23.2.1 Note
  basicRatio *= modRatio;

  // Initial depth
  let D = Math.ceil(Lx * 1000 / basicRatio / 5) * 5;
  let d = D - 25; // cover 20mm + half bar 10mm

  let selfWt = 25 * D / 1000;
  let wu = 1.5 * (selfWt + FF + LL);

  let MuPos = wu * Lx * Lx * posCoeff;
  let MuNeg = isContinuous ? wu * Lx * Lx * negCoeff : 0;
  let MuMax = Math.max(MuPos, MuNeg);

  // Required d from moment (Cl. G.1.1, xu/d = 0.48)
  const reqD = Math.sqrt(MuMax * 1e6 / (0.138 * fck * 1000));
  if (reqD > d) {
    d = Math.ceil(reqD);
    D = d + 25;
  }

  d = D - 25;
  selfWt = 25 * D / 1000;
  wu = 1.5 * (selfWt + FF + LL);
  MuPos = wu * Lx * Lx * posCoeff;
  MuNeg = isContinuous ? wu * Lx * Lx * negCoeff : 0;
  MuMax = Math.max(MuPos, MuNeg);

  // Minimum steel (Cl. 26.5.2.1)
  const minPt = fy > 415 ? 0.08 : 0.12; // Fe500 = 0.08%, others 0.12%
  const minAst = minPt / 100 * 1000 * D;

  // Required steel
  let AstPos = MuPos * 1e6 / (0.87 * fy * d * 0.92); // 0.92 for xu/d <0.48
  AstPos = Math.max(AstPos, minAst);

  let AstNeg = MuNeg * 1e6 / (0.87 * fy * d * 0.92);
  AstNeg = Math.max(AstNeg, minAst * 0.75); // 75% at supports is common practice

  // Bar selection
  const barDia = fy >= 500 ? 10 : 8;
  const barArea = Math.PI * barDia * barDia / 4;
  let spacingPos = Math.floor(1000 * barArea / AstPos / 10) * 10;
  spacingPos = Math.min(300, Math.max(100, spacingPos));

  let spacingNeg = Math.floor(1000 * barArea / AstNeg / 10) * 10;
  spacingNeg = Math.min(300, Math.max(100, spacingNeg));

  // Distribution steel (min steel)
  const distSpacing = 200;

  // Shear check (Cl. 40.1, nominal)
  const Vu = wu * Lx / 2;
  const tauV = Vu * 1000 / (1000 * d);
  const k = D <= 300 ? 1.3 : 1.0;
  const tauC = k * 0.29 * Math.sqrt(fck); // approx pt=0.5%
  const shearOk = tauV <= tauC ? 'OK' : 'Check stirrups';

  document.getElementById('oneway-result').innerHTML = `
    <div class="result">
      <h3 style="color:#27ae60">ONE-WAY SLAB DESIGN (IS 456:2000)</h3>
      <strong>Depth D:</strong> ${D} mm (eff d = ${d} mm)<br>
      <strong>Factored Load wu:</strong> ${wu.toFixed(2)} kN/m¬≤<br>
      <strong>Mu Pos:</strong> ${MuPos.toFixed(2)} kNm/m | Mu Neg: ${MuNeg.toFixed(2)} kNm/m<br>
      <strong>Main Steel (Positive):</strong> œÜ${barDia} @ ${spacingPos} mm c/c (Ast = ${AstPos.toFixed(0)} mm¬≤/m)<br>
      ${isContinuous ? `<strong>Main Steel (Negative):</strong> œÜ${barDia} @ ${spacingNeg} mm c/c (Ast = ${AstNeg.toFixed(0)} mm¬≤/m)<br>` : ''}
      <strong>Distribution Steel:</strong> œÜ8 @ ${distSpacing} mm c/c<br>
      <strong>Shear Stress:</strong> ${tauV.toFixed(2)} MPa ‚â§ ${tauC.toFixed(2)} MPa - ${shearOk}<br>
      <strong>Deflection:</strong> L/d = ${(Lx*1000/d).toFixed(1)} ‚â§ ${basicRatio.toFixed(1)} - OK
    </div>
  `;
}

    // ==================== TWO-WAY SLAB ====================
    function showTwoWay() {
      document.getElementById('content').innerHTML = document.getElementById('twoway-template').innerHTML;
      twoWayDesign();
    }

    function twoWayDesign() {
      document.getElementById('twoway-section').innerHTML = `
        <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">Two-Way Slab Design (IS 456:2000)</h3>
        <label>Short Span Lx (m)</label><input type="number" id="Lx2" value="4.0" step="0.1">
        <label>Long Span Ly (m)</label><input type="number" id="Ly2" value="5.5" step="0.1">
        <label>Live Load (kN/m¬≤)</label><input type="number" id="LL2" value="4.0">
        <label>Floor Finish (kN/m¬≤)</label><input type="number" id="FF2" value="1.0">
        <label>Concrete Grade</label><select id="fck2"><option value="20">M20</option><option value="25" selected>M25</option></select>
        <label>Steel Grade</label><select id="fy2"><option value="415">Fe415</option><option value="500" selected>Fe500</option></select>
        <button class="btn-calc" onclick="calculateTwoWay()">Design Slab</button>
      `;
    }

  function calculateTwoWay() {
  const Lx = parseFloat(document.getElementById('Lx2').value);
  const Ly = parseFloat(document.getElementById('Ly2').value);
  const LL = parseFloat(document.getElementById('LL2').value);
  const FF = parseFloat(document.getElementById('FF2').value);
  const fck = parseFloat(document.getElementById('fck2').value);
  const fy = parseFloat(document.getElementById('fy2').value);

  const ratio = Ly / Lx;
  if (ratio < 1) return alert('Long span (Ly) should be greater than short span (Lx)');

  // Table 26 - Case 1: Interior panel, all edges continuous (IS 456:2000)
  const coeffs = {
    1.0: {shortNeg: 0.032, shortPos: 0.024, longNeg: 0.032, longPos: 0.024},
    1.1: {shortNeg: 0.037, shortPos: 0.028, longNeg: 0.037, longPos: 0.028},
    1.2: {shortNeg: 0.043, shortPos: 0.032, longNeg: 0.035, longPos: 0.026},
    1.3: {shortNeg: 0.049, shortPos: 0.037, longNeg: 0.033, longPos: 0.025},
    1.4: {shortNeg: 0.055, shortPos: 0.041, longNeg: 0.030, longPos: 0.022},
    1.5: {shortNeg: 0.061, shortPos: 0.046, longNeg: 0.028, longPos: 0.021},
    1.75: {shortNeg: 0.074, shortPos: 0.056, longNeg: 0.024, longPos: 0.018},
    2.0: {shortNeg: 0.084, shortPos: 0.063, longNeg: 0.020, longPos: 0.015},
    2.5: {shortNeg: 0.099, shortPos: 0.074, longNeg: 0.016, longPos: 0.012} // Approx for >2
  };

  // Find closest ratio
  let key = Object.keys(coeffs).reduce((a, b) => Math.abs(b - ratio) < Math.abs(a - ratio) ? b : a);
  if (ratio > 2) key = 2.5;
  const c = coeffs[key];

  // Basic span/d ratio for two-way slabs (Cl. 23.2.1) + modification
  let basicRatio = 35;
  const modFs = 0.58 * fy * 0.5 / 230; // Assume pt ‚âà 0.5%
  const modRatio = Math.min(2, 0.8 + modFs);
  basicRatio *= modRatio;

  // Initial depth based on short span
  let D = Math.ceil(Lx * 1000 / basicRatio / 5) * 5;
  let d = D - 25; // cover 20mm + half bar 10mm

  let selfWt = 25 * D / 1000;
  let wu = 1.5 * (selfWt + FF + LL);

  // Moments (Cl. 24.4)
  const MuShortNeg = c.shortNeg * wu * Lx * Lx;
  const MuShortPos = c.shortPos * wu * Lx * Lx;
  const MuLongNeg = c.longNeg * wu * Lx * Lx;
  const MuLongPos = c.longPos * wu * Lx * Lx;

  const maxMu = Math.max(MuShortNeg, MuShortPos, MuLongNeg, MuLongPos);

  // Required d from max moment
  const reqD = Math.sqrt(maxMu * 1e6 / (0.138 * fck * 1000));
  if (reqD > d) {
    d = Math.ceil(reqD);
    D = d + 25;
  }

  d = D - 25;
  selfWt = 25 * D / 1000;
  wu = 1.5 * (selfWt + FF + LL);

  // Recalculate moments with final depth
  const MuSN = c.shortNeg * wu * Lx * Lx;
  const MuSP = c.shortPos * wu * Lx * Lx;
  const MuLN = c.longNeg * wu * Lx * Lx;
  const MuLP = c.longPos * wu * Lx * Lx;

  // Minimum steel (Cl. 26.5.2.1)
  const minPt = fy > 415 ? 0.08 : 0.12;
  const minAst = minPt / 100 * 1000 * D;

  // Required steel (0.92 factor for xu/d < 0.48)
  let AstShortPos = Math.max(MuSP * 1e6 / (0.87 * fy * d * 0.92), minAst);
  let AstShortNeg = Math.max(MuSN * 1e6 / (0.87 * fy * d * 0.92), minAst * 0.75);
  let AstLongPos = Math.max(MuLP * 1e6 / (0.87 * fy * d * 0.92), minAst);
  let AstLongNeg = Math.max(MuLN * 1e6 / (0.87 * fy * d * 0.92), minAst * 0.75);

  // Torsion steel at corners (Cl. D-1 of Annex D)
  const AstTorsion = 0.75 * Math.max(AstShortPos, AstShortNeg); // 75% of max Ast

  // Bar selection
  const barDia = fy >= 500 ? 10 : 8;
  const barArea = Math.PI * barDia * barDia / 4;

  let spacingSP = Math.floor(1000 * barArea / AstShortPos / 10) * 10;
  spacingSP = Math.min(300, Math.max(100, spacingSP));

  let spacingSN = Math.floor(1000 * barArea / AstShortNeg / 10) * 10;
  spacingSN = Math.min(300, Math.max(100, spacingSN));

  let spacingLP = Math.floor(1000 * barArea / AstLongPos / 10) * 10;
  spacingLP = Math.min(300, Math.max(100, spacingLP));

  let spacingLN = Math.floor(1000 * barArea / AstLongNeg / 10) * 10;
  spacingLN = Math.min(300, Math.max(100, spacingLN));

  // Shear (nominal, Cl. 40)
  const Vu = wu * Lx / 2;
  const tauV = Vu * 1000 / (1000 * d);
  const tauC = 0.29 * Math.sqrt(fck); // approx pt=0.25%
  const shearOk = tauV <= tauC ? 'OK' : 'Needs reinforcement';

  document.getElementById('twoway-result').innerHTML = `
    <div class="result">
      <h3 style="color:#27ae60">TWO-WAY SLAB DESIGN (IS 456:2000 Table 26)</h3>
      <strong>Ratio Ly/Lx:</strong> ${ratio.toFixed(2)} (used coeff for ${key})<br>
      <strong>Depth D:</strong> ${D} mm (eff d = ${d} mm)<br>
      <strong>Factored Load wu:</strong> ${wu.toFixed(2)} kN/m¬≤<br>
      <strong>Short Span Positive:</strong> œÜ${barDia} @ ${spacingSP} mm (Ast = ${AstShortPos.toFixed(0)} mm¬≤/m)<br>
      <strong>Short Span Negative:</strong> œÜ${barDia} @ ${spacingSN} mm (Ast = ${AstShortNeg.toFixed(0)} mm¬≤/m)<br>
      <strong>Long Span Positive:</strong> œÜ${barDia} @ ${spacingLP} mm (Ast = ${AstLongPos.toFixed(0)} mm¬≤/m)<br>
      <strong>Long Span Negative:</strong> œÜ${barDia} @ ${spacingLN} mm (Ast = ${AstLongNeg.toFixed(0)} mm¬≤/m)<br>
      <strong>Torsion Steel (Corners):</strong> ${AstTorsion.toFixed(0)} mm¬≤/m, œÜ${barDia} @ ${Math.floor(1000 * barArea / AstTorsion / 10) * 10} mm, length = Lx/5 both ways<br>
      <strong>Shear:</strong> ${tauV.toFixed(2)} MPa ‚â§ ${tauC.toFixed(2)} MPa - ${shearOk}<br>
      <strong>Deflection:</strong> Lx/d = ${(Lx*1000/d).toFixed(1)} ‚â§ ${basicRatio.toFixed(1)} - OK
    </div>
  `;
}
    // ==================== BEAM DESIGN ====================
    function showBeam() {
      document.getElementById('content').innerHTML = document.getElementById('beam-template').innerHTML;
      beamDesign();
    }

    function beamDesign() {
      document.getElementById('beam-section').innerHTML = `
        <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">RCC Beam Design (IS 456:2000)</h3>
        <label>Span (m)</label><input type="number" id="span" value="5.0" step="0.1">
        <label>Width b (mm)</label><input type="number" id="b" value="300">
        <label>Live Load (kN/m)</label><input type="number" id="LLb" value="20">
        <label>Dead Load excl. self wt (kN/m)</label><input type="number" id="DLb" value="15">
        <label>Concrete Grade</label><select id="fckb"><option value="20">M20</option><option value="25" selected>M25</option></select>
        <label>Steel Grade</label><select id="fyb"><option value="415">Fe415</option><option value="500" selected>Fe500</option></select>
        <button class="btn-calc" onclick="calculateBeam()">Design Beam</button>
      `;
    }

    function calculateBeam() {
  const L = parseFloat(document.getElementById('span').value);
  const b = parseFloat(document.getElementById('b').value);
  const LL = parseFloat(document.getElementById('LLb').value);
  const DL = parseFloat(document.getElementById('DLb').value);
  const fck = parseFloat(document.getElementById('fckb').value);
  const fy = parseFloat(document.getElementById('fyb').value);

  // Basic span/d ratio (Cl. 23.2.1) + modification (assume pt ‚âà 0.8%)
  let basicRatio = 20; // simply supported (conservative)
  const modFs = 0.58 * fy * 0.8 / 230;
  const modRatio = Math.min(2, 0.8 + modFs);
  basicRatio *= modRatio;

  // Initial depth
  let D = Math.ceil(L * 1000 / basicRatio / 25) * 25;
  let d = D - 50; // cover 25mm + stirrup 8mm + half bar 20mm

  let selfWt = b * D / 1e6 * 25;
  let wu = 1.5 * (DL + selfWt + LL);
  let Mu = wu * L * L / 8;
  let Vu = wu * L / 2;

  // Singly reinforced limit (Cl. G.1.1, xu/d = 0.48)
  let MuLim = 0.138 * fck * b * d * d / 1e6;

  let Asc = 0;
  let Ast = 0;

  if (Mu > MuLim) {
    // Doubly reinforced (Cl. G.2)
    const Mu2 = Mu - MuLim;
    const dPrime = 50; // compression cover
    const fsc = 0.87 * fy; // assume compression steel yields
    Asc = Mu2 * 1e6 / (fsc * (d - dPrime));
    const Ast1 = (0.138 * fck * b * d) / (0.87 * fy);
    Ast = Ast1 + Asc * (0.45 * fck) / (0.87 * fy);
  } else {
    // Singly reinforced
    Ast = Mu * 1e6 / (0.87 * fy * d * 0.92);
  }

  // Minimum steel (Cl. 26.5.1.1)
  Ast = Math.max(Ast, 0.85 * b * d / fy);

  // Bar selection (try 20mm bars, adjust if needed)
  const barDia = 20;
  const barArea = Math.PI * barDia * barDia / 4;
  const numBars = Math.ceil(Ast / barArea);
  const actualAst = numBars * barArea;

  // Shear design (Cl. 40)
  const tauV = Vu * 1000 / (b * d);
  const pt = 100 * actualAst / (b * d);

  // tau_c from Table 19 (interpolated)
  let tauC = 0.28; // base for pt=0.15
  if (pt >= 0.25) tauC = 0.36 + (pt - 0.25) * (0.48 - 0.36) / 0.75;
  if (pt >= 1.0) tauC = 0.48 + (pt - 1.0) * 0.02;
  tauC *= Math.sqrt(fck / 25); // increase for higher fck

  const tauCmax = [2.8, 3.1, 3.5, 3.7, 4.0][Math.floor((fck-15)/5)] || 4.0; // Table 20

  let stirrups = 'Not required';
  if (tauV > tauC) {
    const Sv = (0.87 * fy * 2 * (Math.PI * 8 * 8 / 4)) / ((tauV - tauC) * b * 1000);
    const SvMax = Math.min(0.75 * d, 300);
    const SvFinal = Math.floor(Sv / 25) * 25;
    stirrups = `œÜ8 2-leg @ ${Math.min(SvFinal, SvMax)} mm c/c`;
  } else if (tauV > 0.5 * tauC) {
    stirrups = 'Nominal œÜ8 2-leg @ 300 mm c/c';
  }

  const shearStatus = tauV <= tauCmax ? 'OK' : 'Exceeds max - Increase section';

  // Deflection check
  const span_d = L * 1000 / d;
  const deflStatus = span_d <= basicRatio ? 'OK' : 'Revise depth';

  document.getElementById('beam-result').innerHTML = `
    <div class="result">
      <h3 style="color:#27ae60">BEAM DESIGN (IS 456:2000)</h3>
      <strong>Size:</strong> ${b} √ó ${D} mm (eff d = ${d} mm)<br>
      <strong>Factored Load wu:</strong> ${wu.toFixed(2)} kN/m<br>
      <strong>Mu:</strong> ${Mu.toFixed(1)} kNm (Limit: ${MuLim.toFixed(1)} kNm)<br>
      <strong>Tension Steel:</strong> ${numBars}-œÜ${barDia} (Ast = ${actualAst.toFixed(0)} mm¬≤)<br>
      ${Asc > 0 ? `<strong>Compression Steel:</strong> ${Math.ceil(Asc / barArea)}-œÜ${barDia} (Asc = ${Asc.toFixed(0)} mm¬≤)<br>` : ''}
      <strong>Stirrups (Shear):</strong> ${stirrups}<br>
      <strong>Shear Stress:</strong> ${tauV.toFixed(2)} MPa ‚â§ œÑc = ${tauC.toFixed(2)} MPa (max ${tauCmax.toFixed(1)}) - ${shearStatus}<br>
      <strong>Deflection:</strong> L/d = ${span_d.toFixed(1)} ‚â§ ${basicRatio.toFixed(1)} - ${deflStatus}<br>
      <em>Note: Assumes simply supported. For continuous, use appropriate moments.</em>
    </div>
  `;
  document.getElementById('beam-result').innerHTML += drawBeamSection(b, D, d, barDia, numBars, Asc > 0 ? Math.ceil(Asc / barArea) : 0);

  
}
   // ==================== COLUMN DESIGN ====================
    function showColumn() {
      document.getElementById('content').innerHTML = document.getElementById('column-template').innerHTML;
      columnDesign();
    }

    function columnDesign() {
      document.getElementById('column-section').innerHTML = `
        <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">RCC Column Design (Axial + Uniaxial) ‚Äì IS 456:2000</h3>
        <label>Axial Load Pu (kN)</label><input type="number" id="Pu" value="1200">
        <label>Moment Mu (kNm)</label><input type="number" id="Mu" value="150">
        <label>Unsupported Length (m)</label><input type="number" id="Lcol" value="3.0" step="0.1">
        <label>Concrete Grade</label><select id="fckc"><option value="20">M20</option><option value="25" selected>M25</option><option value="30">M30</option></select>
        <label>Steel Grade</label><select id="fyc"><option value="415">Fe415</option><option value="500" selected>Fe500</option></select>
        <button class="btn-calc" onclick="calculateColumn()">Design Column</button>
      `;
    }

    function calculateColumn() {
  const Pu = parseFloat(document.getElementById('Pu').value) * 1000; // kN ‚Üí N
  const Mu = parseFloat(document.getElementById('Mu').value) * 1e6; // kNm ‚Üí Nmm
  const L = parseFloat(document.getElementById('Lcol').value) * 1000; // m ‚Üí mm
  const fck = parseFloat(document.getElementById('fckc').value);
  const fy = parseFloat(document.getElementById('fyc').value);

  // Effective length (assume braced, partially fixed ends, k ‚âà 0.8‚Äì0.9)
  const le = 0.85 * L; // conservative for typical building columns

  // Trial size (axial capacity approx 0.4 fck Ag)
  let side = Math.ceil(Math.sqrt(Pu / (0.4 * fck)) / 25) * 25;
  if (side < 300) side = 300;

  const Ag = side * side;
  const Asc_min = 0.008 * Ag; // min 0.8% (Cl. 26.5.3.1)

  // Slenderness check (Cl. 25.3)
  const slenderness = le / side;
  const slendernessOk = slenderness <= 12 ? 'Short Column' : 'Slender ‚Äì Needs additional moment';

  // Approximate Pu-Mu interaction (simplified from SP 16 charts)
  // For short column, capacity: Pu = 0.4 fck Ac + 0.67 fy Asc
  // Mu capacity approx: 0.12 fck b d^2 (conservative for uniaxial)
  const PuCap = 0.4 * fck * (Ag - Asc_min) + 0.67 * fy * Asc_min;
  const MuCap = 0.12 * fck * side * side * side / 1e6; // rough uniaxial moment capacity

  // Interaction ratio (linear approximation, conservative)
  const interactionRatio = (Pu / PuCap) + (Mu / MuCap);
  const capacityStatus = interactionRatio <= 1 ? 'SAFE' : 'UNSAFE ‚Äì Increase size or steel';

  // Steel required (if axial dominant)
  let Asc = Asc_min;
  if (Pu > 0.4 * fck * Ag) {
    Asc = (Pu - 0.4 * fck * Ag) / (0.67 * fy - 0.4 * fck);
    Asc = Math.max(Asc, Asc_min);
  }

  // Bar selection (8 bars typical)
  const barDia = 20;
  const barArea = Math.PI * barDia * barDia / 4;
  const numBars = Math.ceil(Asc / barArea);
  const actualAsc = numBars * barArea;

  // Ties (Cl. 26.5.3.2)
  const tieDia = Math.max(6, Math.ceil(side / 30));
  const tieSpacing = Math.min(side, 16 * barDia, 300);

  document.getElementById('column-result').innerHTML = `
    <div class="result ${capacityStatus === 'SAFE' ? '' : 'fail'}">
      <h3 style="color:${capacityStatus === 'SAFE' ? '#27ae60' : '#c0392b'}">
        COLUMN DESIGN (IS 456:2000 / SP 16)
      </h3>
      <strong>Size (Square):</strong> ${side} √ó ${side} mm<br>
      <strong>Slenderness:</strong> le/D = ${slenderness.toFixed(1)} ‚Üí ${slendernessOk}<br>
      <strong>Factored Pu:</strong> ${(Pu/1000).toFixed(0)} kN<br>
      <strong>Factored Mu:</strong> ${(Mu/1e6).toFixed(1)} kNm<br>
      <strong>Required Steel Asc:</strong> ${Asc.toFixed(0)} mm¬≤ (min 0.8%)<br>
      <strong>Provided Steel:</strong> ${numBars}-œÜ${barDia} (Asc = ${actualAsc.toFixed(0)} mm¬≤)<br>
      <strong>Ties:</strong> œÜ${tieDia} @ ${tieSpacing} mm c/c<br>
      <strong>Capacity Check:</strong> Pu/PuCap + Mu/MuCap = ${interactionRatio.toFixed(2)} ${capacityStatus === 'SAFE' ? '‚â§ 1' : '> 1'} ‚Üí <strong>${capacityStatus}</strong><br>
      <em>Note: Simplified uniaxial check. For biaxial or slender columns, use full SP 16 charts.</em>
    </div>
  `;
}

    // ==================== WATER TANK (IS 3370:2009) ====================
    function showWaterTank() {
      document.getElementById('content').innerHTML = document.getElementById('watertank-template').innerHTML;
      waterTankDesign();
    }

    function waterTankDesign() {
      document.getElementById('watertank-section').innerHTML = `
        <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">Rectangular Water Tank (IS 3370:2009)</h3>
        <label>Internal Length L (m)</label><input type="number" id="Ltank" value="4.0" step="0.1">
        <label>Internal Width B (m)</label><input type="number" id="Btank" value="3.0" step="0.1">
        <label>Water Depth H (m)</label><input type="number" id="Htank" value="3.5" step="0.1">
        <label>Freeboard (m)</label><input type="number" id="fb" value="0.3">
        <button class="btn-calc" onclick="calculateWaterTank()">Design Tank</button>
      `;
    }

  function calculateWaterTank() {
  const L = parseFloat(document.getElementById('Ltank').value);
  const B = parseFloat(document.getElementById('Btank').value);
  const H = parseFloat(document.getElementById('Htank').value);
  const fb = parseFloat(document.getElementById('fb').value);
  const totalH = H + fb;

  // Standard grades for tanks (IS 3370)
  const fck = 25; // M25 minimum
  const fy = 500; // Fe500

  // Hydrostatic pressure at base (kN/m¬≤)
  const p_base = 10 * H; // Œ≥w = 10 kN/m¬≥

  // Moment for long wall (fixed base, free top, approx triangular load)
  // For long wall: M = p h¬≤ / 12 (conservative)
  const M_long = p_base * totalH * totalH / 12; // kNm/m
  const M_short = p_base * totalH * totalH / 12 * Math.pow(B / L, 2); // shorter wall
  const M_max = Math.max(M_long, M_short);

  // Minimum thickness (IS 3370 Table 1, approx for H=3.5m ‚Üí 200‚Äì300mm)
  let D_min = 150 + 30 * H; // Rough rule: 150 + 30mm per meter depth
  D_min = Math.max(200, D_min); // Minimum 200mm

  // Required depth from moment (Cl. G.1.1 LSM)
  let d_req = Math.sqrt(M_max * 1e6 / (0.138 * fck * 1000));
  let D = Math.max(D_min, Math.ceil(d_req + 50)); // +50mm for cover + bar

  const d = D - 50; // cover 40mm + half bar 12mm

  // Required steel (both faces, horizontal)
  let Ast = M_max * 1e6 / (0.87 * fy * d * 0.92); // 0.92 for xu/d <0.48
  Ast = Math.max(Ast, 0.003 * 1000 * D); // Min 0.3% (IS 3370 Cl. 6.1)

  // Bar selection (horizontal, both faces)
  const barDia = 12;
  const barArea = Math.PI * barDia * barDia / 4;
  let spacing = Math.floor(1000 * barArea / Ast / 10) * 10;
  spacing = Math.min(200, Math.max(100, spacing)); // Max spacing 200mm for tanks

  // Vertical steel (min 0.3%)
  const Ast_vert = 0.003 * 1000 * D;
  const spacing_vert = Math.floor(1000 * barArea / Ast_vert / 10) * 10;
  const final_vert = Math.min(200, spacing_vert);

  // Crack width check (IS 3370 Cl. 3.3, similar to IS 456 Annex F)
  const fs = 0.58 * fy * Ast / (0.003 * 1000 * D); // service stress
  const acr = 40 + barDia / 2; // cover 40mm typical for tanks
  const h = D;
  const xu = 0.48 * d; // approx
  const eps_m = fs / 200000;
  const w_cr = 3 * acr * eps_m / (1 + 2 * (acr - 40) / (h - xu));
  const crackOk = w_cr <= 0.2 ? 'OK' : 'Increase thickness/steel';

  document.getElementById('watertank-result').innerHTML = `
    <div class="result ${crackOk === 'OK' ? '' : 'fail'}">
      <h3 style="color:${crackOk === 'OK' ? '#27ae60' : '#c0392b'}">
        WATER TANK DESIGN (IS 3370:2009)
      </h3>
      <strong>Wall Thickness:</strong> ${D} mm (eff d = ${d} mm)<br>
      <strong>Max Hydrostatic Pressure:</strong> ${p_base.toFixed(1)} kN/m¬≤<br>
      <strong>Max Moment:</strong> ${M_max.toFixed(2)} kNm/m<br>
      <strong>Horizontal Steel (both faces):</strong> œÜ${barDia} @ ${spacing} mm c/c (Ast = ${Ast.toFixed(0)} mm¬≤/m)<br>
      <strong>Vertical Steel:</strong> œÜ${barDia} @ ${final_vert} mm c/c (min 0.3%)<br>
      <strong>Crack Width:</strong> ${w_cr.toFixed(3)} mm ‚â§ 0.2 mm - ${crackOk}<br>
      <strong>Base Slab:</strong> Design separately (similar moments + self-weight)<br>
      <em>Note: Assumes fixed base, free top. Use full analysis for corners & openings.</em>
    </div>
  `;
}

    // ==================== DOG-LEGGED STAIRCASE ====================
    function showStaircase() {
      document.getElementById('content').innerHTML = document.getElementById('staircase-template').innerHTML;
      staircaseDesign();
    }

    function staircaseDesign() {
      document.getElementById('staircase-section').innerHTML = `
        <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">Dog-Legged Staircase Design (IS 456:2000)</h3>
        <label>Floor to Floor Height (m)</label><input type="number" id="height" value="3.3" step="0.1">
        <label>No. of Risers per Flight</label><input type="number" id="risers" value="11">
        <label>Tread T (mm)</label><input type="number" id="tread" value="300">
        <label>Width of Stair (m)</label><input type="number" id="width" value="1.5">
        <label>Live Load (kN/m¬≤)</label><input type="number" id="LLs" value="4.0">
        <button class="btn-calc" onclick="calculateStaircase()">Design Staircase</button>
      `;
    }

   function calculateStaircase() {
  const H_floor = parseFloat(document.getElementById('height').value); // floor to floor height (m)
  const n_risers = parseFloat(document.getElementById('risers').value);
  const tread = parseFloat(document.getElementById('tread').value) / 1000; // tread in m
  const width = parseFloat(document.getElementById('width').value); // stair width (m)
  const LL = parseFloat(document.getElementById('LLs').value); // kN/m¬≤

  // Riser height
  const riser = H_floor / n_risers; // m

  // Going (horizontal distance per flight)
  const going = (n_risers - 1) * tread; // one less tread than risers

  // Inclined length of one flight (hypotenuse)
  const inclinedLength = Math.sqrt(going * going + H_floor * H_floor); // per flight

  // Total effective span (two flights + landing, landing ‚âà width)
  const landing = width; // typical landing = stair width
  const span = 2 * going + landing; // total horizontal span

  // Loads on waist slab (Cl. 33.1)
  const waist_thickness = 0.15; // initial trial (150mm typical)
  const selfWt_waist = 25 * waist_thickness; // kN/m¬≤
  const steps_load = 25 * (riser / 2); // half riser as average load
  const FF = 1.0; // floor finish
  const total_DL = selfWt_waist + steps_load + FF;
  const wu = 1.5 * (total_DL + LL); // ultimate load kN/m¬≤

  // Factored load per meter run (along width)
  const wu_run = wu * width; // kN/m (along span)

  // Max moment (simply supported conservative)
  const Mu = wu_run * span * span / 8; // kNm (at midspan)

  // Required depth from moment
  let d = Math.sqrt(Mu * 1e6 / (0.138 * 25 * width * 1000)); // M25 conservative
  let D = Math.ceil(d + 30); // + cover + bar
  if (D < 120) D = 120; // minimum practical

  d = D - 25; // effective depth

  // Recalculate self-weight with final thickness
  const selfWt_final = 25 * (D / 1000);
  const total_DL_final = selfWt_final + steps_load + FF;
  const wu_final = 1.5 * (total_DL_final + LL);
  const wu_run_final = wu_final * width;
  const Mu_final = wu_run_final * span * span / 8;

  // Required main steel (tension side)
  let Ast = Mu_final * 1e6 / (0.87 * 500 * d * 0.92); // Fe500 typical
  const minAst = 0.0012 * width * 1000 * D; // min 0.12%
  Ast = Math.max(Ast, minAst);

  // Bar selection (main bars along span)
  const barDia = 12;
  const barArea = Math.PI * barDia * barDia / 4;
  let spacing = Math.floor(1000 * barArea / (Ast / width) / 10) * 10; // per m width
  spacing = Math.min(200, Math.max(100, spacing));

  // Distribution steel (across span)
  const distAst = minAst;
  const distSpacing = 200;

  // Shear check (at support)
  const Vu = wu_run_final * span / 2;
  const tauV = Vu * 1000 / (width * 1000 * d);
  const tauC = 0.36 * Math.sqrt(25); // approx pt=0.25%
  const shearOk = tauV <= tauC ? 'OK' : 'Needs stirrups';

  // Deflection check
  const span_d = span * 1000 / d;
  const basicRatio = 20; // simply supported
  const deflOk = span_d <= basicRatio ? 'OK' : 'Revise thickness';

  document.getElementById('staircase-result').innerHTML = `
    <div class="result">
      <h3 style="color:#27ae60">DOG-LEGGED STAIRCASE DESIGN (IS 456:2000)</h3>
      <strong>Riser:</strong> ${(riser * 1000).toFixed(0)} mm | Tread: ${(tread * 1000).toFixed(0)} mm<br>
      <strong>Waist Slab Thickness:</strong> ${D} mm (eff d = ${d} mm)<br>
      <strong>Effective Span:</strong> ${span.toFixed(2)} m (2 flights + landing)<br>
      <strong>Factored Load wu:</strong> ${wu_final.toFixed(2)} kN/m¬≤<br>
      <strong>Main Steel (along span):</strong> œÜ${barDia} @ ${spacing} mm c/c (Ast = ${Ast.toFixed(0)} mm¬≤/m)<br>
      <strong>Distribution Steel:</strong> œÜ10 @ ${distSpacing} mm c/c (min 0.12%)<br>
      <strong>Shear Stress:</strong> ${tauV.toFixed(2)} MPa ‚â§ ${tauC.toFixed(2)} MPa - ${shearOk}<br>
      <strong>Deflection:</strong> span/d = ${span_d.toFixed(1)} ‚â§ ${basicRatio} - ${deflOk}<br>
      <em>Note: Assumes simply supported waist slab. Add nominal stirrups if needed.</em>
    </div>
  `;
}

    // ==================== CRACK WIDTH ====================
    function showCrack() {
      document.getElementById('content').innerHTML = document.getElementById('crack-template').innerHTML;
      crackPro();
    }

    function crackPro() {
      document.getElementById('crack-section').innerHTML = `
        <h3 style="text-align:center;margin-bottom:20px;color:var var(--p);">Crack Width Calculator (IS 456:2000)</h3>
        <label>Steel Grade</label><select id="fy_crack"><option>415</option><option selected>500</option></select>
        <label>Service Stress fs (MPa)</label><input type="number" id="fs" value="240">
        <label>Bar Diameter œÜ (mm)</label><input type="number" id="dia" value="16">
        <label>Clear Cover (mm)</label><input type="number" id="cover" value="30">
        <label>Depth h (mm)</label><input type="number" id="h" value="500">
        <label>Neutral Axis xu (mm)</label><input type="number" id="xu" value="120">
        <button class="btn-calc" onclick="calculateCrackPro()">Calculate</button>
      `;
    }

    function calculateCrackPro() {
      const fy = parseFloat(document.getElementById('fy_crack').value);
      const fs = parseFloat(document.getElementById('fs').value);
      const dia = parseFloat(document.getElementById('dia').value);
      const cover = parseFloat(document.getElementById('cover').value);
      const h = parseFloat(document.getElementById('h').value);
      const xu = parseFloat(document.getElementById('xu').value);

      const table = {415:{240:180,280:160,320:140},500:{240:160,280:140,320:120}};
      let maxSpacing = table[fy][240];
      Object.keys(table[fy]).forEach(stress => {
        if (fs <= stress) maxSpacing = table[fy][stress];
      });

      const acr = cover + dia/2;
      const eps_m = fs / 200000;
      const w_cr = 3 * acr * eps_m / (1 + 2*(acr-cover)/(h-xu));
      const ok = w_cr <= 0.3; // IS 456 allows 0.3 mm for normal exposure

      document.getElementById('crack-result').innerHTML = `
        <div class="result ${ok?'':'fail'}">
          <h3 style="text-align:center;color:${ok?'#27ae60':'#c0392b'}">${ok?'SAFE':'REVISE'}</h3>
          <strong>Crack Width = ${w_cr.toFixed(3)} mm</strong><br>
          <strong>Limit = 0.3 mm</strong>
        </div>
      `;
    }

    // ==================== DEVELOPMENT LENGTH ====================
    function showDevLength() {
      document.getElementById('content').innerHTML = document.getElementById('devlength-template').innerHTML;
      devLengthPro();
    }

    function devLengthPro() {
      document.getElementById('dev-section').innerHTML = `
        <h3 style="text-align:center;margin-bottom:20px;color:var(--p);">Development Length Ld (IS 456 Cl. 26.2.1)</h3>
        <label>Bar Diameter œÜ (mm)</label><input type="number" id="dia_ld" value="20">
        <label>Steel Grade</label><select id="fy_ld"><option value="415">Fe415</option><option value="500" selected>Fe500</option></select>
        <label>Concrete Grade</label><select id="fck_ld"><option value="20">M20</option><option value="25" selected>M25</option></select>
        <label>Stress Type</label><select id="stress_ld"><option value="tension" selected>Tension</option><option value="compression">Compression</option></select>
        <label>Anchorage</label><select id="anchorage_ld"><option value="straight">Straight</option><option value="hook90">90¬∞ Hook</option></select>
        <div class="checkbox-grid">
          <div class="checkbox-item"><input type="checkbox" id="topbar"><label for="topbar">Top bar (>300mm)</label></div>
          <div class="checkbox-item"><input type="checkbox" id="bundled"><label for="bundled">Bundled bars</label></div>
        </div>
        <button class="btn-calc" onclick="calculateDevLength()">Calculate Ld</button>
      `;
    }
    function calculateDevLength() {
      const dia = parseFloat(document.getElementById('dia_ld').value);
      const fy = parseFloat(document.getElementById('fy_ld').value);
      const fck = parseFloat(document.getElementById('fck_ld').value);
      const tension = document.getElementById('stress_ld').value === "tension";
      const hook = document.getElementById('anchorage_ld').value === "hook90" ? 8 : 0;

      const tau = tension ? (fck <= 25 ? 1.2 : 1.4) : 1.25 * 1.4;
      let Ld = (0.87 * fy * dia) / (4 * tau);
      if (document.getElementById('topbar').checked) Ld *= 1.2;
      if (document.getElementById('bundled').checked) Ld *= 1.15;

      const final = Math.round(Ld - hook * dia);

      document.getElementById('dev-result').innerHTML = `
        <div class="result">
          <h3 style="text-align:center;color:#27ae60;">DEVELOPMENT LENGTH</h3>
          <strong>Required Ld = ${Math.ceil(Ld)} mm</strong><br>
          <strong>After 90¬∞ Hook = ${final} mm</strong>
        </div>
      `;
    }

    // ==================== FULLY WORKING HAMBURGER MENU ====================
    function showCodalProvisions() {
  let html = `<div class="card"><h2>Select Country / Region</h2>
    <p style="margin-bottom:30px;font-size:17px;">Choose a country to view its structural design codes</p>
    <div class="mode-grid">`;

  Object.keys(countries).forEach(country => {
    const flag = country === "India" ? "üáÆüá≥" : 
                 country.includes("Europe") ? "üá™üá∫" : 
                 country.includes("United") ? "üá∫üá∏" : "üáØüáµ";
    html += `<div class="mode-card" onclick="showCountryCodes('${country}')">
      <h3 style="font-size:48px;margin-bottom:10px;">${flag}</h3>
      <h3>${country}</h3>
      <p>View categorized codes</p>
    </div>`;
  });

  html += `</div></div>`;
  document.getElementById('content').innerHTML = html;
}

function showCountryCodes(country) {
  const codeCats = countries[country];
  let html = `<div class="card"><h2>${country} Structural Codes</h2>
    <button class="btn-calc" onclick="showCodalProvisions()" style="width:auto;padding:12px 24px;margin-bottom:20px;">‚Üê Back to Countries</button>`;

  Object.keys(codeCats).forEach(category => {
    const codes = codeCats[category];
    html += `
      <div class="code-category">
        <h3 class="category-title" onclick="this.parentElement.classList.toggle('open')">${category} (${codes.length})</h3>
        <div class="code-grid category-grid">`;
    codes.forEach(c => {
      html += `<div class="code-card">
        <h3>${c.t}</h3>
        <p style="font-size:15px;color:#555;line-height:1.6;">${c.d}</p>
        <a href="${c.l}" target="_blank">Open PDF</a>
      </div>`;
    });
    html += `</div></div>`;
  });

  html += `</div>`;
  document.getElementById('content').innerHTML = html;
}
// === IMPROVED HAMBURGER MENU ‚Äì STAYS OPEN ON DESKTOP ===
document.getElementById("menu-toggle").addEventListener("click", function(e) {
  e.stopPropagation();
  const sidebar = document.getElementById("sidebar");

  // On mobile: toggle open/close
  if (window.innerWidth <= 992) {
    sidebar.classList.toggle("active");
    sidebar.classList.toggle("closed");
  }
  // On desktop/tablet: do nothing ‚Äî keep sidebar always visible
});

// Close sidebar only on mobile when clicking outside
document.addEventListener("click", function(e) {
  const sidebar = document.getElementById("sidebar");
  const toggle = document.getElementById("menu-toggle");

  if (window.innerWidth <= 992 &&
      sidebar.classList.contains("active") &&
      !sidebar.contains(e.target) &&
      !toggle.contains(e.target)) {
    sidebar.classList.remove("active");
    sidebar.classList.add("closed");
  }
});

// Prevent closing when clicking inside sidebar
document.getElementById("sidebar").addEventListener("click", e => e.stopPropagation());

// On load: always show sidebar on desktop/tablet
window.addEventListener("load", () => {
  const sidebar = document.getElementById("sidebar");
  if (window.innerWidth > 992) {
    sidebar.classList.remove("closed");
    sidebar.classList.add("active");
  } else {
    sidebar.classList.add("closed");
  }
});

// Optional: Re-check on resize
window.addEventListener("resize", () => {
  const sidebar = document.getElementById("sidebar");
  if (window.innerWidth > 992) {
    sidebar.classList.remove("closed");
    sidebar.classList.add("active");
  } else if (!sidebar.classList.contains("active")) {
    sidebar.classList.add("closed");
  }
});

    function toggleSub(id) {
  const submenu = document.getElementById(id);              // find the submenu
  const parentSpan = submenu.previousElementSibling;        // find the "Design Calculators" line

  // Optional: close all other open submenus (makes it feel more modern)
  document.querySelectorAll('.submenu.active').forEach(el => {
    if (el !== submenu) {
      el.classList.remove('active');
      el.previousElementSibling.classList.remove('active');
    }
  });

  // Now toggle (open/close) the one we clicked
  submenu.classList.toggle('active');
  parentSpan.classList.toggle('active');
}

function showSteelPlaceholder() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Steel Design (IS 800:2007)</h2>
      <p style="font-size:18px;color:var(--text-muted);text-align:center;margin:40px 0;">
        Coming Soon!<br><br>
        Beam Design ‚Ä¢ Column Design ‚Ä¢ Tension Members ‚Ä¢ Connections ‚Ä¢ Base Plate
      </p>
      <div style="text-align:center;margin-top:30px;">
        <i class="fas fa-hard-hat" style="font-size:80px;color:var(--primary);opacity:0.3;"></i>
      </div>
    </div>
  `;
}

// ==================== STEEL DESIGN CALCULATORS (IS 800:2007) ====================

// 1. Laterally Supported Beam Design
function showSteelBeam() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Steel Beam Design ‚Äì Laterally Supported (IS 800:2007)</h2>
      <label>Factored Moment Mu (kNm)</label><input type="number" id="sb-mu" value="150">
      <label>Span L (m)</label><input type="number" id="sb-l" value="6">
      <label>Yield Strength fy (MPa)</label><select id="sb-fy"><option value="250" selected>Fe250</option><option value="355">Fe355</option><option value="410">Fe410</option></select>
      <label>Section Class</label><select id="sb-class"><option value="plastic" selected>Plastic</option><option value="compact">Compact</option><option value="semi">Semi-Compact</option></select>
      <button class="btn-calc" onclick="calcSteelBeam()">Design Beam</button>
      <div id="sb-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcSteelBeam() {
  const mu = parseFloat(document.getElementById('sb-mu').value) * 1e6; // kNm to Nmm
  const l = parseFloat(document.getElementById('sb-l').value);
  const fy = parseFloat(document.getElementById('sb-fy').value);
  const secClass = document.getElementById('sb-class').value;

  const beta = secClass === 'plastic' ? 1.0 : secClass === 'compact' ? 1.0 : 1.2;
  const gamma = 1.1;
  const Zp_req = mu * gamma / (beta * fy); // mm¬≥

  // Suggest common ISMB sections (approximate Zp in 10^3 mm¬≥)
  const sections = [
    {name: "ISMB 150", zp: 170}, {name: "ISMB 200", zp: 310}, {name: "ISMB 250", zp: 520},
    {name: "ISMB 300", zp: 780}, {name: "ISMB 350", zp: 1100}, {name: "ISMB 400", zp: 1500},
    {name: "ISMB 450", zp: 1950}, {name: "ISMB 500", zp: 2500}, {name: "ISMB 600", zp: 3800}
  ];

  let suggested = "Try heavier section";
  for (let s of sections) {
    if (s.zp * 1e3 >= Zp_req) { suggested = s.name; break; }
  }

  document.getElementById('sb-result').innerHTML = `
    <strong>Required Zp = ${(Zp_req/1e3).toFixed(1)} √ó 10¬≥ mm¬≥</strong><br>
    <strong>Suggested Section: ${suggested}</strong><br>
    <small>Class ${secClass} ‚Ä¢ fy = ${fy} MPa</small>
  `;
  document.getElementById('sb-result').style.display = 'block';
}

// 2. Steel Column Design
function showSteelColumn() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Steel Column Design (Axial Load)</h2>
      <label>Axial Load Pu (kN)</label><input type="number" id="sc-pu" value="1200">
      <label>Effective Length KL (m)</label><input type="number" id="sc-kl" value="4">
      <label>fy (MPa)</label><select id="sc-fy"><option value="250" selected>250</option><option value="355">355</option></select>
      <button class="btn-calc" onclick="calcSteelColumn()">Design Column</button>
      <div id="sc-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcSteelColumn() {
  const pu = parseFloat(document.getElementById('sc-pu').value) * 1000; // kN to N
  const kl = parseFloat(document.getElementById('sc-kl').value) * 1000; // m to mm
  const fy = parseFloat(document.getElementById('sc-fy').value);

  const lambda = kl / 80; // rough slenderness assumption
  const fcd = fy / (1.1 * (0.5 + 0.5 * Math.pow(lambda/100, 2))); // simplified

  const A_req = pu / fcd; // mm¬≤

  document.getElementById('sc-result').innerHTML = `
    <strong>Required Area ‚âà ${Math.ceil(A_req)} mm¬≤</strong><br>
    <strong>Safe Stress fcd ‚âà ${fcd.toFixed(1)} MPa</strong><br>
    <small>Preliminary estimate ‚Äì use full buckling curve for accuracy</small>
  `;
  document.getElementById('sc-result').style.display = 'block';
}

// 3. Tension Member
function showSteelTension() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Tension Member Design</h2>
      <label>Tension Force Tu (kN)</label><input type="number" id="st-tu" value="800">
      <label>fy (MPa)</label><input type="number" id="st-fy" value="250">
      <label>Gross Area Ag (mm¬≤)</label><input type="number" id="st-ag" value="5000">
      <label>Holes (dia mm)</label><input type="number" id="st-hole" value="22">
      <label>No. of Holes in Line</label><input type="number" id="st-holes" value="2">
      <button class="btn-calc" onclick="calcTension()">Check Capacity</button>
      <div id="st-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcTension() {
  const tu = parseFloat(document.getElementById('st-tu').value) * 1000;
  const fy = parseFloat(document.getElementById('st-fy').value);
  const ag = parseFloat(document.getElementById('st-ag').value);
  const hole = parseFloat(document.getElementById('st-hole').value) + 4; // +4mm clearance
  const holes = parseFloat(document.getElementById('st-holes').value);

  const an = ag - holes * hole * 10; // assume 10mm plate
  const designStrength = 0.9 * an * fy / 1.1; // net section
  const grossYield = ag * fy / 1.25;

  const capacity = Math.min(designStrength, grossYield) / 1000;

  const status = capacity >= tu ? 'SAFE' : 'UNSAFE';

  document.getElementById('st-result').innerHTML = `
    <strong>Net Area = ${an.toFixed(0)} mm¬≤</strong><br>
    <strong>Capacity = ${capacity.toFixed(0)} kN</strong><br>
    <strong>Required = ${tu/1000} kN ‚Üí ${status}</strong>
  `;
  document.getElementById('st-result').style.display = 'block';
}

// 4. Bolted Connection
function showSteelConnection() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Bolted Connection (Bearing Type)</h2>
      <label>Bolt Dia (mm)</label><select id="bc-dia"><option>16</option><option selected>20</option><option>24</option></select>
      <label>No. of Bolts</label><input type="number" id="bc-num" value="6">
      <label>Bolt Grade</label><select id="bc-grade"><option value="4.6" selected>4.6</option><option value="8.8">8.8</option></select>
      <label>Plate Thickness (mm)</label><input type="number" id="bc-t" value="12">
      <button class="btn-calc" onclick="calcBolt()">Calculate Capacity</button>
      <div id="bc-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcBolt() {
  const dia = parseFloat(document.getElementById('bc-dia').value);
  const num = parseFloat(document.getElementById('bc-num').value);
  const grade = document.getElementById('bc-grade').value;
  const t = parseFloat(document.getElementById('bc-t').value);

  const fub = grade === '4.6' ? 400 : 800;
  const Vnsb = (num * Math.PI * dia * dia / 4 * fub) / 1.25 / 1000; // kN

  document.getElementById('bc-result').innerHTML = `
    <strong>Shear Capacity = ${Vnsb.toFixed(0)} kN</strong><br>
    <small>${grade} bolts ‚Ä¢ M${dia}</small>
  `;
  document.getElementById('bc-result').style.display = 'block';
}

// 5. Base Plate Design
function showSteelBasePlate() {
  document.getElementById('content').innerHTML = `
    <div class="card">
      <h2>Base Plate Design (Axial Load)</h2>
      <label>Axial Load P (kN)</label><input type="number" id="bp-p" value="1200">
      <label>Concrete fck (MPa)</label><input type="number" id="bp-fck" value="25">
      <label>Column Size (mm √ó mm)</label><input type="text" id="bp-col" value="400x400">
      <button class="btn-calc" onclick="calcBasePlate()">Design Plate</button>
      <div id="bp-result" class="result" style="display:none;margin-top:20px;"></div>
    </div>
  `;
}

function calcBasePlate() {
  const p = parseFloat(document.getElementById('bp-p').value);
  const fck = parseFloat(document.getElementById('bp-fck').value);
  const col = document.getElementById('bp-col').value.split('x').map(x => parseFloat(x));

  const w = 0.6 * Math.sqrt(fck); // bearing strength
  const A_req = p / w;

  const side = Math.max(col[0], col[1]) + 100; // rough projection
  const area_prov = side * side;
  const thickness = Math.ceil(Math.sqrt(p * 1000 / (0.6 * 250 * side * 2)) / 5) * 5; // simplified

  document.getElementById('bp-result').innerHTML = `
    <strong>Required Area = ${A_req.toFixed(0)} mm¬≤</strong><br>
    <strong>Suggested Plate: ${side} √ó ${side} √ó ${thickness} mm</strong>
  `;
  document.getElementById('bp-result').style.display = 'block';
}

// Auto-load home and set welcome name on first open
window.addEventListener('load', () => {
  document.getElementById('username').textContent = 'Engineer';
  showHome();
  
  // Fix sidebar on desktop
  if (window.innerWidth > 992) {
    document.getElementById('sidebar').classList.remove('closed');
  }
});

  </script>
</body>
</html>



